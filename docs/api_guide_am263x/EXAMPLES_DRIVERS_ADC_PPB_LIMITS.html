<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263x MCU+ SDK: ADC PPB Limits</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263x MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_ADC_PPB_LIMITS.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ADC PPB Limits </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2022">Introduction</a><ul><li class="level2"><a href="#autotoc_md2023">Example Description</a></li>
<li class="level2"><a href="#autotoc_md2024">SOC configuration</a></li>
<li class="level2"><a href="#autotoc_md2025">PPB Configurations</a></li>
<li class="level2"><a href="#autotoc_md2026">ISR Configuration</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md2027">External Connections</a><ul><li class="level2"><a href="#autotoc_md2028">AM263PX-CC E2 or AM263X-CC E2 or AM261X-SOM E1</a></li>
<li class="level2"><a href="#autotoc_md2029">AM263X-CC E1</a></li>
<li class="level2"><a href="#autotoc_md2030">AM263PX-LP or AM263X-LP or AM261X-LP</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md2031">Watch Variables</a></li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_ADC_PPB_LIMITS_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md2032">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md2033">See Also</a></li>
<li class="level1"><a href="#autotoc_md2034">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_adc_ppb_limits"></a></p>
<h1><a class="anchor" id="autotoc_md2022"></a>
Introduction</h1>
<ul>
<li>Post Processing Blocks of the ADC are featured with limit checking on the PPBResult registers. the following are limits that each PPB can check,<ol type="1">
<li>High Limit</li>
<li>Low Limit</li>
<li>Zero Crossing.</li>
</ol>
</li>
<li>PPB can generate Event flags, for selected events. Also, each PPB can generate an EVTINT based on which event has occured. ADCxEVTINT is a logical OR of all such PPBxEVTINT in given ADC.</li>
</ul>
<p> <style>div.image img[src="am263_adc_ppb_limits.png"]{width:75%}</style> </p><div class="image">
<img src="am263_adc_ppb_limits.png" alt=""/>
<div class="caption">
Example Block diagram</div></div>
 <h2><a class="anchor" id="autotoc_md2023"></a>
Example Description</h2>
<p>This example is a demonstration of such feature and uses the loopback from DAC to generate the required analog wave form (ramp wave is choosen for this example). Once the High and Low values are touched, the PPBs generate the EVTINT and ISR will check the events of PPB0, PPB1 (both configured for SOC0) and determine which limit has occured.</p>
<h2><a class="anchor" id="autotoc_md2024"></a>
SOC configuration</h2>
<ul>
<li>SOC0 is configured to sample on AIN0</li>
<li>Sample window of 20 is selected (arbitrary)</li>
<li>Software only trigger is selected. </li>
</ul>
<h2><a class="anchor" id="autotoc_md2025"></a>
PPB Configurations</h2>
<ul>
<li>SOC0 is selected for PPB0 and PPB1</li>
<li>PPB1 is set for Higher Limit Checking i.e., PPB Event is set for TripHigh</li>
<li>PPB1EVTINT is set for TripHigh</li>
<li>PPB2 is set for Lower Limit Checking i.e., PPB Event is set for TripLow</li>
<li>PPB2EVTINT is set for TripLow Note : PPBEVTINT is a logical OR for all the PPBxEVTINT, and is source for ISR</li>
</ul>
<h2><a class="anchor" id="autotoc_md2026"></a>
ISR Configuration</h2>
<ul>
<li>App_adc_PPB_ISR is set for INTXbar0, selected for ADC1EVTINT</li>
<li>ISR checks which event has occured and load the corresponding PPB result to respective arrays.</li>
<li>ISR Clears the events for further generated event identification</li>
</ul>
<h1><a class="anchor" id="autotoc_md2027"></a>
External Connections</h1>
<h2><a class="anchor" id="autotoc_md2028"></a>
AM263PX-CC E2 or AM263X-CC E2 or AM261X-SOM E1</h2>
<p>Loop DAC output back to ADC1 Channel 0</p><ul>
<li>Connect HSEC Pin 9 to HSEC Pin 12 </li>
</ul>
<h2><a class="anchor" id="autotoc_md2029"></a>
AM263X-CC E1</h2>
<p>Loop DAC output back to ADC1 Channel 0</p><ul>
<li>Connect HSEC Pin 9 to HSEC Pin 18</li>
</ul>
<h2><a class="anchor" id="autotoc_md2030"></a>
AM263PX-LP or AM263X-LP or AM261X-LP</h2>
<p>Loop DAC output back to ADC1 Channel 0</p><ul>
<li>Connect J1/J3 Pin 30 to J1/J3 Pin 24 (for AM261X-LP, to use DAC out at J3 30, please refer to IO expander configurations from Schematics and Syscfg)</li>
</ul>
<h1><a class="anchor" id="autotoc_md2031"></a>
Watch Variables</h1>
<ul>
<li>gAdcHighLimitOutputs[] - holds the High limit trip values</li>
<li>gAdcLowLimitOutputs[] - holds the Low limit trip values</li>
</ul>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_ADC_PPB_LIMITS_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am263x-cc, am263x-lp   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/adc/adc_ppb_limits/   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2032"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Establish connections as mentioned in External Connections section</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
<li>Using the watch variables, view the ADC conversion results.</li>
<li>Observe 6 EPWM waveforms. After ADC input voltage exceeds the PPB limit, PWMs get tripped.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2033"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_ADC_PAGE.html">ADC</a></p>
<h1><a class="anchor" id="autotoc_md2034"></a>
Sample Output</h1>
<p>Shown below is a sample output when the application is run,</p>
<div class="fragment"><div class="line">ADC PPB Limits Test Started</div>
<div class="line">ADC trip high events occurred for Conversion Values :</div>
<div class="line">    3046</div>
<div class="line">    3207</div>
<div class="line">    3208</div>
<div class="line">    3204</div>
<div class="line">    3207</div>
<div class="line">ADC trip low events occurred for Conversion Values :</div>
<div class="line">    90</div>
<div class="line">    195</div>
<div class="line">    301</div>
<div class="line">    402</div>
<div class="line">    503</div>
<div class="line">    608</div>
<div class="line">    713</div>
<div class="line">    816</div>
<div class="line">    920</div>
<div class="line">    90</div>
<div class="line">    195</div>
<div class="line">    299</div>
<div class="line">    402</div>
<div class="line">    503</div>
<div class="line">    607</div>
<div class="line">    714</div>
<div class="line">    817</div>
<div class="line">    919</div>
<div class="line">    90</div>
<div class="line">    194</div>
<div class="line">    297</div>
<div class="line">ADC PPB Limits Test Passed</div>
<div class="line">All tests have passed!!</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
