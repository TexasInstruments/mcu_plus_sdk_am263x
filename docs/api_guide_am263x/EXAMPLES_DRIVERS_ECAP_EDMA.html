<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263x MCU+ SDK: ECAP EDMA Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263x MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_ECAP_EDMA.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ECAP EDMA Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2288">Introduction</a><ul><li class="level2"><a href="#autotoc_md2289">Example Description:</a><ul><li class="level3"><a href="#autotoc_md2290">ECAP Configurations:</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md2291">Watch Variables :</a></li>
<li class="level1"><a href="#autotoc_md2292">External Connections</a><ul><li class="level2"><a href="#autotoc_md2293">AM263X-CC or AM263Px-CC or AM261X-SOM</a></li>
<li class="level2"><a href="#autotoc_md2294">AM263X-LP or AM263Px-LP or AM261X-LP</a></li>
</ul>
</li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_ECAP_EDMA_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md2295">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md2296">See Also</a></li>
<li class="level1"><a href="#autotoc_md2297">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_ecap_edma"></a></p>
<h1><a class="anchor" id="autotoc_md2288"></a>
Introduction</h1>
<p>This example demostrates the ECAP triggerring EDMA for transfer of the ECAP timestamp registers to the TCM location without R5 intervention. ECAP can generate EDMA triggers for Data transfer in both CAPTURE mode and APWM mode</p><ul>
<li>In ECAP Capture Mode, the CAPEVTx [x= 1 to 4] can be used and</li>
<li>In ECAP APWM Mode, The counter match to Compare or Period can be used.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2289"></a>
Example Description:</h2>
<p>An ECAP (APWM_ECAP) is configured in APWM mode to generate trigger at its counter matching period event to transfer timestamp data from "CAPTURE_ECAP2". 2 ECAPs (CAPTURE_ECAP1, CAPTURE_ECAP2) are configured to capture the APMW_ECAP PWM wave. CAPTURE_ECAP1 also triggers EDMA on one of its Capture events.</p>
<p> <style>div.image img[src="am263_ecap_edma_example_block_diagram.png"]{width:50%}</style> </p><div class="image">
<img src="am263_ecap_edma_example_block_diagram.png" alt=""/>
<div class="caption">
Example Block diagram</div></div>
<h3><a class="anchor" id="autotoc_md2290"></a>
ECAP Configurations:</h3>
<ol type="1">
<li>APWM_ECAP:</li>
</ol>
<ul>
<li>APWM mode, 5KHz and 25% duty cycle</li>
<li>DMA trigger at Counter = Period event for channel 0</li>
<li>Output routed via Outputxbar13 (GPIO119)</li>
</ul>
<ol type="1">
<li>CAPTURE_ECAP1:</li>
</ol>
<ul>
<li>CAPTURE MODE, capturing Falling, Rising, Falling, Rising edges on its four events,</li>
<li>counter resets at CAPEVT1,2,3,4. Thereby, recording<ul>
<li>ON time at CAP1, CAP3,</li>
<li>OFF times at CAP2,CAP4,</li>
</ul>
</li>
<li>CAPEVT4 is the source for the DMA channel 1 trigger for the transfer of its timestamps in CAPx</li>
</ul>
<ol type="1">
<li>CAPTURE_ECAP2:</li>
</ol>
<ul>
<li>CAPTURE mode, Capturing Falling, Rising edges on its 2 events,</li>
<li>counter resets on CAPEVT1,2. thereby recording,<ul>
<li>ON time on CAP1</li>
<li>OFF time on CAP2 A total of 256 transfers on Channel 0 and 128 transfers on Channel 1 are triggered, and the buffers "capTrigTimeStamps" and "pwmTrigTimeStamps" are compared.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md2291"></a>
Watch Variables :</h1>
<ol type="1">
<li>capTrigTimeStamps [ ]: array with CAPTURE_ECAP1 Captured timestamps, triggered by Capture mode.</li>
<li>pwmTrigTimeStamps [ ]: array with CAPTURE_ECAP2 Captured timestamps, triggered by APWM mode.</li>
</ol>
<h1><a class="anchor" id="autotoc_md2292"></a>
External Connections</h1>
<h2><a class="anchor" id="autotoc_md2293"></a>
AM263X-CC or AM263Px-CC or AM261X-SOM</h2>
<p>No external connection is required.</p>
<h2><a class="anchor" id="autotoc_md2294"></a>
AM263X-LP or AM263Px-LP or AM261X-LP</h2>
<p>No external connection is required.</p>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_ECAP_EDMA_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Boards  </td><td class="markdownTableBodyNone">am263x-cc, am263x-lp   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/ecap/ecap_edma/   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2295"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Establish connections as mentioned in External Connections section</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2296"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_ECAP_PAGE.html">ECAP</a></p>
<h1><a class="anchor" id="autotoc_md2297"></a>
Sample Output</h1>
<p>Shown below is a sample output when the application is run,</p>
<div class="fragment"><div class="line">ECAP triggered EDMA transfers Test Started ...</div>
<div class="line">EDMA transfers complete.</div>
<div class="line">ECAP triggered EDMA transfers Passed!!</div>
<div class="line">All tests have passed!!</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
