<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263x MCU+ SDK: SBL SD</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263x MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_SBL_SD.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SBL SD </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2711">Introduction</a></li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_SBL_SD_MCELF">SBL SD MULTICORE ELF</a></li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_SBL_SD_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md2712">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md2713">See Also</a></li>
<li class="level1"><a href="#autotoc_md2714">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_sbl_sd"></a></p>
<h1><a class="anchor" id="autotoc_md2711"></a>
Introduction</h1>
<p>This bootloader does SOC initializations and attempts to boot a multicore application image file named "app" present in the first FAT partition found in the connected SD card. The file can be copied to the SD card by connecting it to the host PC using a card reader. Make sure that it is named "app" without any file extension. If the card is new, make sure that it is formatted with FAT32/16.</p>
<p>If a multicore application image file is found at the location, the SBL reads the file into a buffer and parses it. Each core is then initialized, application image is loaded, entry points are set and the core is released from reset. For more on bootflow/bootloaders, please refer <a class="el" href="BOOTFLOW_GUIDE.html">Understanding the bootflow and bootloaders</a></p>
<p>This bootloader runs in three steps:</p><ul>
<li>Format the SD Card with FAT32/16 (this is necessary if the card is new) and paste the *.mcelf image of desired application in the first FAT partition found in the Connected SD card. For connecting the SD Card to the host PC use a card reader. Make sure that the pasted file is named "app" without any file extension.</li>
<li>Flashing the SBL SD at offset 0x0 (Setup the EVM in UART Boot Mode, <a class="el" href="TOOLS_FLASH.html#BASIC_STEPS_TO_FLASH_FILES">Basic steps to flash files</a>). For flashing the SBL use the <code>mcelf_sbl_sd</code> configuration file present in tools/boot/sbl_prebuilt.</li>
<li>Switch to <a class="el" href="EVM_SETUP_PAGE.html#BOOTMODE_QSPI">QSPI BOOT MODE</a> and Connect to UART in 5 seconds to see logs from UART</li>
</ul>
<p> <style>div.image img[src="am263x_sbl_sd_flow.png"]{width:9%}</style> </p><div class="image">
<img src="am263x_sbl_sd_flow.png" alt=""/>
<div class="caption">
SBL SD Flow Overview</div></div>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_SBL_SD_MCELF"></a>
SBL SD MULTICORE ELF</h1>
<p>For AM263x/AM263Px devices, use the Multicore ELF project of SBL SD</p>
<p>To parse and load an <b>mcelf</b> file via SD bootloader, use the project <b>examples/drivers/boot/sbl_sd_multicore_elf</b></p>
<p>When an mcelf image is received, the SBL parses it, loads each segment to its respective core. Then the core is released from reset.</p>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_SBL_SD_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Boards  </td><td class="markdownTableBodyNone">am263x-cc, am263x-lp   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/boot/sbl_sd_multicore_elf   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2712"></a>
Steps to Run the Example</h1>
<p>Since this is a bootloader, the example will be run every time you boot an application using this example. It is run from an SD card unlike other examples which are usually loaded with CCS. Nevertheless, you can build this example like you do for the others using makefile or build it via CCS by importing as a project.</p>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Refer to the page <a class="el" href="TOOLS_FLASH.html#BASIC_STEPS_TO_FLASH_FILES">Basic steps to flash files</a> to flash this bootloader along with the application to boot.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2713"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_BOOTLOADER_PAGE.html">BOOTLOADER</a></p>
<h1><a class="anchor" id="autotoc_md2714"></a>
Sample Output</h1>
<p>Logs from IPC RPMSG ECHO example: </p><div class="fragment"><div class="line">Starting SD Bootloader ...</div>
<div class="line">[BOOTLOADER_PROFILE] Boot Media       : SD Card</div>
<div class="line">[BOOTLOADER_PROFILE] Boot Image Size  : 183 KB</div>
<div class="line">[BOOTLOADER_PROFILE] Cores present    :</div>
<div class="line">r5f1-1</div>
<div class="line">r5f1-0</div>
<div class="line">r5f0-1</div>
<div class="line">r5f0-0</div>
<div class="line">[BOOTLOADER PROFILE] System_init                      :        368us</div>
<div class="line">[BOOTLOADER PROFILE] Drivers_open                     :     280357us</div>
<div class="line">[BOOTLOADER PROFILE] LoadHsmRtFw                      :         44us</div>
<div class="line">[BOOTLOADER PROFILE] Board_driversOpen                :        405us</div>
<div class="line">[BOOTLOADER PROFILE] File read from SD card           :     240375us</div>
<div class="line">[BOOTLOADER PROFILE] CPU load                         :      16916us</div>
<div class="line">[BOOTLOADER_PROFILE] SBL Total Time Taken             :     538468us</div>
<div class="line"> </div>
<div class="line">Image loading done, switching to application ...</div>
<div class="line">[r5f0-1]     0.001077s : [IPC RPMSG ECHO] Remote Core waiting for messages from main core ... !!!</div>
<div class="line">[r5f1-0]     0.001073s : [IPC RPMSG ECHO] Remote Core waiting for messages from main core ... !!!</div>
<div class="line">[r5f1-1]     0.001068s : [IPC RPMSG ECHO] Remote Core waiting for messages from main core ... !!!</div>
<div class="line">[IPC RPMSG ECHO] Message exchange started by main core !!!</div>
<div class="line">[IPC RPMSG ECHO] All echoed messages received by main core from 3 remote cores !!!</div>
<div class="line">[IPC RPMSG ECHO] Messages sent to each core = 100000</div>
<div class="line">[IPC RPMSG ECHO] Number of remote cores = 3</div>
<div class="line">[IPC RPMSG ECHO] Total execution time = 6349363 usecs</div>
<div class="line">[IPC RPMSG ECHO] One way message latency = 10582 nsec</div>
<div class="line">All tests have passed!!</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
