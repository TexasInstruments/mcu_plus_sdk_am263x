<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263x MCU+ SDK: Flash a Hello World example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263x MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('GETTING_STARTED_FLASH.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Flash a Hello World example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md54">Introduction</a></li>
<li class="level1"><a href="#autotoc_md55">Getting ready to flash the application</a></li>
<li class="level1"><a href="#autotoc_md56">Flashing the application</a></li>
<li class="level1"><a href="#autotoc_md57">Running the flashed application</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_getting_started_getting_started_flash"></a></p>
<dl class="section attention"><dt>Attention</dt><dd>Flashing a application will overwrite the SOC init application that was flashed earlier. So if you want to load and run from CCS again, you will need to do the SOC init steps again. See <a class="el" href="ADDITIONAL_DETAILS_PAGE.html#EVM_SOC_INIT">SOC Initialization</a> for more details.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>See also <a class="el" href="TOOLS_FLASH.html">Flashing Tools</a> for more details on the flashing tools.</dd></dl>
<h1><a class="anchor" id="autotoc_md54"></a>
Introduction</h1>
<p>In this step we will flash the application that we have build and run using CCS to the EVM flash. We can then boot this application without being connected to CCS via JTAG.</p>
<h1><a class="anchor" id="autotoc_md55"></a>
Getting ready to flash the application</h1>
<ul>
<li>A quick recap of steps done so far that are needed for the flashing to work<ul>
<li>Make sure the UART port used for terminal is identified as mentioned in <a class="el" href="EVM_SETUP_PAGE.html#CCS_UART_TERMINAL">Setup UART Terminal</a></li>
<li>Make sure python3 is installed as mentioned in <a class="el" href="SDK_DOWNLOAD_PAGE.html#INSTALL_PYTHON3">Python3</a></li>
<li>Make sure you have the EVM power cable and UART cable connected as shown in <a class="el" href="EVM_SETUP_PAGE.html#EVM_CABLES">Cable Connections</a></li>
</ul>
</li>
<li>Build the hello world application as mentioned in <a class="el" href="GETTING_STARTED_BUILD.html">Build a Hello World example</a></li>
<li>As part of the build process in the final step, files with extension <code>.mcelf</code> and <code>.mcelf_xip</code> are generated. These are the files we need to flash.<ul>
<li><p class="startli">When building with makefiles and single-core projects, this file can be found here (shown for hello world example),</p>
<p class="startli">${SDK_INSTALL_PATH}/examples/hello_world/{board}/r5fss0-0_freertos/ti-arm-clang/hello_world.release.mcelf ${SDK_INSTALL_PATH}/examples/hello_world/{board}/r5fss0-0_freertos/ti-arm-clang/hello_world.release.mcelf_xip</p>
</li>
<li>When building with CCS and single-core projects, this file can be found here (shown for hello world example), <pre class="fragment">${CCS_WORKSPACE_PATH}/hello_world_{board}_r5fss0-0_freertos_ti-arm-clang/Release/hello_world_{board}_r5fss0-0_freertos_ti-arm-clang.mcelf
${CCS_WORKSPACE_PATH}/hello_world_{board}_r5fss0-0_freertos_ti-arm-clang/Release/hello_world_{board}_r5fss0-0_freertos_ti-arm-clang.mcelf_xip
</pre></li>
<li>When building with makefiles and multi-core system projects, this file can be found here (shown for IPC Notify example), <pre class="fragment">${SDK_INSTALL_PATH}/examples/drivers/ipc/ipc_notify_echo/{board}/system_freertos_nortos/ipc_notify_echo_system.release.mcelf
${SDK_INSTALL_PATH}/examples/drivers/ipc/ipc_notify_echo/{board}/system_freertos_nortos/ipc_notify_echo_system.release.mcelf_xip
</pre></li>
<li>When building with CCS and multi-core system projects, this file can be found here (shown for IPC Notify example), <pre class="fragment">${CCS_WORKSPACE_PATH}/ipc_notify_echo_{board}_system_freertos_nortos/Release/ipc_notify_echo_system.mcelf
${CCS_WORKSPACE_PATH}/ipc_notify_echo_{board}_system_freertos_nortos/Release/ipc_notify_echo_system.mcelf_xip
</pre></li>
<li><b>NOTE</b>: The folder name and file name in path can have "release", "Release" or "debug", "Debug" based on the profile that the application is built with.</li>
</ul>
</li>
<li>Next, we need to list the files to flash in a flash configuration file. A default configuration file can be found at below path. You can edit this file directly or take a copy and edit this file.</li>
</ul>
<p>Configuration file is <code>mcelf_sbl_ospi.cfg</code></p>
<ul>
<li>Edit below line in the config file to point to your application <code>.mcelf</code> file. Give the absolute path to the <code>.mcelf</code> file or path relative to <code>${SDK_INSTALL_PATH}/tools/boot</code>. <b>Make sure to use forward slash <code>/</code> in the filename path</b>. <pre class="fragment">  --file=../../examples/drivers/ipc/ipc_notify_echo/{board}/system_freertos_nortos/ipc_notify_echo_system.release.mcelf --operation=flash-sector-write --flash-offset=0x81000
</pre></li>
<li>Edit below line in the config file to point to your application <code>.mcelf_xip</code> file. Give the absolute path to the <code>.mcelf_xip</code> file or path relative to <code>${SDK_INSTALL_PATH}/tools/boot</code>. <b>Make sure to use forward slash <code>/</code> in the filename path</b>. <pre class="fragment">  --file=../../examples/drivers/ipc/ipc_notify_echo/{board}/system_freertos_nortos/ipc_notify_echo_system.release.mcelf_xip --operation=flash-mcelf-xip
</pre></li>
<li>This file will additionally also list the flashing application that is run on the EVM and a OSPI flash bootloader that also needs to be flashed. You can keep this unchanged if you have not modified these applications.</li>
<li>Save and close the config file.</li>
</ul>
<h1><a class="anchor" id="autotoc_md56"></a>
Flashing the application</h1>
<ul>
<li><b>POWER-OFF</b> the Evaluation board</li>
<li>The boot mode should be <a class="el" href="EVM_SETUP_PAGE.html#BOOTMODE_UART">UART BOOT MODE</a></li>
<li><b>POWER-ON</b> the Evaluation board</li>
<li>You should see character "C" getting printed on the UART terminal every 1-2 seconds as shown below</li>
</ul>
<p> <style>div.image img[src="uart_rom_boot.png"]{width:80%}</style> </p><div class="image">
<img src="uart_rom_boot.png" alt=""/>
<div class="caption">
UART output in UART BOOT MODE</div></div>
<ul>
<li>Close the UART terminal as shown below. This is important, else the UART script in next step wont be able to connect to the UART port.</li>
</ul>
<p> <style>div.image img[src="ccs_uart_close.png"]{width:80%}</style> </p><div class="image">
<img src="ccs_uart_close.png" alt=""/>
<div class="caption">
Close UART terminal</div></div>
<ul>
<li>Open a command prompt and run the below command to flash the SOC initialization binary to the EVM. <pre class="fragment">  cd ${SDK_INSTALL_PATH}/tools/boot

  python uart_uniflash.py -p COM&lt;x&gt; --cfg=sbl_prebuilt/am263x-cc/mcelf_sbl_qspi.cfg
</pre><ul>
<li>Here COM&lt;x&gt; is the port name of the identified UART port in Windows.</li>
<li>On Linux,<ul>
<li>The name for UART port is typically something like <code>/dev/ttyACM0</code></li>
<li>On some Linux systems, one needs to use <code>python3</code> to invoke python3.x, just <code>python</code> command may invoke python 2.x which will not work with the flashing script.</li>
</ul>
</li>
</ul>
</li>
<li>When the flashing is in progress you will see something like below  <style>div.image img[src="flash_qspi_boot_in_progress.png"]{width:80%}</style> <div class="image">
<img src="flash_qspi_boot_in_progress.png" alt=""/>
<div class="caption">
Flash in progress</div></div>
</li>
<li>After all the flashing is done, you will see something like below  <style>div.image img[src="flash_qspi_boot_success.png"]{width:80%}</style> <div class="image">
<img src="flash_qspi_boot_success.png" alt=""/>
<div class="caption">
Flashing successful</div></div>
</li>
<li>If flashing has failed, see <a class="el" href="TOOLS_FLASH.html#TOOLS_FLASH_ERROR_MESSAGES">Flash tool error messages and solutions</a>, and resolve the errors.</li>
<li>If flashing is successful, do the next steps ...</li>
</ul>
<h1><a class="anchor" id="autotoc_md57"></a>
Running the flashed application</h1>
<ul>
<li><b>POWER-OFF</b> the EVM</li>
<li>Change the boot mode to <a class="el" href="EVM_SETUP_PAGE.html#BOOTMODE_QSPI">QSPI BOOT MODE</a></li>
<li><b>POWER-ON</b> the EVM</li>
<li>Re-connect the UART terminal in CCS window as shown in <a class="el" href="EVM_SETUP_PAGE.html#CCS_UART_TERMINAL">Setup UART Terminal</a></li>
<li>Press the reset button on the board as shown in <a class="el" href="EVM_SETUP_PAGE.html#EVM_CABLES">Cable Connections</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
