<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263x MCU+ SDK: Enet CPSW Ether-Ring TSN Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263x MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_ENET_CPSW_ETHERRING.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Enet CPSW Ether-Ring TSN Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md3056">Introduction</a></li>
<li class="level1"><a href="#autotoc_md3057">Ether-Ring overview</a></li>
<li class="level1"><a href="#autotoc_md3058">Configuration Parameters</a></li>
<li class="level1"><a href="#autotoc_md3059">Application Functionality</a><ul><li class="level2"><a href="#autotoc_md3060">Ether-Ring Application Flow</a></li>
<li class="level2"><a href="#autotoc_md3061">EST Schedule</a></li>
<li class="level2"><a href="#autotoc_md3062">RX Host Time stamping</a></li>
<li class="level2"><a href="#autotoc_md3063">ALE Configuration</a></li>
<li class="level2"><a href="#autotoc_md3064">Ether-Ring Start Menu</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md3065">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md3066">Packet pool configuration</a></li>
<li class="level1"><a href="#autotoc_md3067">Steps to Run the Example</a><ul><li class="level2"><a href="#autotoc_md3068">Build the example</a></li>
<li class="level2"><a href="#autotoc_md3069">HW Setup</a></li>
<li class="level2"><a href="#autotoc_md3070">Run the example</a><ul><li class="level3"><a href="#autotoc_md3071">Basic Test</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md3072">Sample output</a></li>
<li class="level2"><a href="#autotoc_md3073">Troubleshooting issues</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md3074">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_networking_enet_cpsw_etherring"></a></p>
<h1><a class="anchor" id="autotoc_md3056"></a>
Introduction</h1>
<p>This example application illustrates the configuration and usage of Ether-Ring topology with 4 nodes connected in loop where each node works as central compute, zone left, zone right and zone tail. The example application enables both MAC ports by default and each node is connected to it's neighbouring node in a loop. This application uses Concurrence execution of gPTP IEEE 802.1AS stack and IEEE 802.1 Qbv (EST) configuration and Ether-ring (‘802.1CB-like’) to support Packet Duplication, Ring Termination in Hardware and Duplicate Rejection in Software.</p>
<p>The example application opens two DMA TX channels and two DMA RX channels. The TX0 and RX0 DMA channel will be used by the application to send the Class-A and Class-D stream packets via Ether-Ring Driver. The TX0 and RX0 DMA channel will be used for GPTP.</p>
<p>The application will also open the both MAC port and will wait until the port gets link up with neighbouring node. The application waits for GPTP synchronization to happen and then applies the EST Schedule on both MAC ports.</p>
<p>The application uses <a class="el" href="group__ENET__MOD__TAS.html">Enet Time Aware Shaper</a> API for EST configuration ,<a class="el" href="ENET_CPSW_TSN_GPTP.html">Ethernet TSN and gPTP Stack - API and Integration Guide</a> for gPTP and <a class="el" href="group__ENET__DMA__API.html">Enet Data Path (DMA)</a> API for packet transmission.</p>
<dl class="section note"><dt>Note</dt><dd>This application only provides the Etherring Functionality. But the Performance will be acheived in further releases.</dd></dl>
<h1><a class="anchor" id="autotoc_md3057"></a>
Ether-Ring overview</h1>
<p>Please refer <b><a class="el" href="ETHERRING_OVERVIEW.html">here</a></b> for Ether-Ring overview</p>
<h1><a class="anchor" id="autotoc_md3058"></a>
Configuration Parameters</h1>
<p>Typically, the application's parameters that a developer may want to change are:</p>
<ul>
<li><b>Number of Nodes</b>. By default the example application configures the etherring for 4 Nodes, but the user can choose to update the number of nodes in etherring using <code>MAX_NODES_IN_LOOP = 4</code> in <code>config.h</code>.</li>
<li><b>Number of Class A Streams</b>. By default the number of Class A Streams are configured as 1 for each Node. User can update the configuration bye changes <code>NUM_CLASSA_STREAMS</code> in <code>config.h</code>.</li>
<li><b>Class A Payload Length</b>. Class A payload length is configured as 1000 be default and user can update <code>CLASSA_PAYLOAD_LENGTH</code> in <code>config.h</code> .</li>
<li><b>Class D Payload Length</b>. Class D payload length is configured as 1450 be default and user can update <code>CLASSD_PAYLOAD_LENGTH</code> in <code>config.h</code> .</li>
</ul>
<h1><a class="anchor" id="autotoc_md3059"></a>
Application Functionality</h1>
<h2><a class="anchor" id="autotoc_md3060"></a>
Ether-Ring Application Flow</h2>
<p>The Application creates Class-A, Class-D stream RTOS tasks which creates the 802.1Q Ethernet Multicast packet with stream configuration and calls "EtherRing_submitTxPktQ" API from Ether-Ring Driver. "EtherRing_submitTxPktQ" creates a custom 802.1 CB-like header(4 bytes) which consists of CB-like Ethertype(0xF1C1), unique sequence ID for each Ethernet packet and adds the CB-like Header to the packet sent from application without modifying the payload using zero-copy (using Transmit Scatter-Gather feature of HW). The packet is submitted to DMA and CPSW duplicates the multicast packet and sent it to both MAC ports.</p>
<div class="image">
<img src="etherring_tx.png" alt="" width="60%"/>
<div class="caption">
Ether-Ring Transmit Flow </div></div>
<p>When the packets are received RX DMA ISR will be triggered and "EtherRing_retrieveRxPktQ" is called from RTOS Rx application task. "EtherRing_retrieveRxPktQ" calls the DMA Retrieve API to retrieve the packets and Duplicate Packet Rejection is done using {SrcMacAddr, Sequence Number} based Look-up Table. Original stream packets found using look-up table are sent to Application and Duplicate packets received are submitted back to the DMA.</p>
<div class="image">
<img src="etherring_rx.png" alt="" width="60%"/>
<div class="caption">
Ether-Ring Receive Flow </div></div>
 <h2><a class="anchor" id="autotoc_md3061"></a>
EST Schedule</h2>
<p>This EST schedule is 1 msec long and is composed of 8 intervals, each with a gate mask that enables transmission of 2,3 are configured for Class A and Class D streams.</p>
<center> <table class="doxtable">
<caption>EST schedule parameters</caption>
<tr>
<th>Parameter </th><th>Time Value </th></tr>
<tr>
<td>BaseTime </td><td>Current time + <code>MAX_BASE_TIME_US</code> </td></tr>
<tr>
<td>CycleTime </td><td>1 msec </td></tr>
</table>
</center><center><table class="doxtable">
<caption>Gate control list</caption>
<tr>
<th>Gate Control </th><th>Time Interval </th></tr>
<tr>
<td><code>oCCCooCC</code> </td><td>125 usecs </td></tr>
<tr>
<td><code>oCCCCCCC</code> </td><td>125 usecs </td></tr>
<tr>
<td><code>oCCCCCCC</code> </td><td>125 usecs </td></tr>
<tr>
<td><code>oCCCCCCC</code> </td><td>125 usecs </td></tr>
<tr>
<td><code>oCCCCCCC</code> </td><td>125 usecs </td></tr>
<tr>
<td><code>oCCCCCCC</code> </td><td>125 usecs </td></tr>
<tr>
<td><code>oCCCCCCC</code> </td><td>125 usecs </td></tr>
<tr>
<td><code>oCCCCCCC</code> </td><td>125 usecs </td></tr>
</table>
</center><p>The <em>priority</em> being referred to in the EST schedule described above corresponds to the CPSW destination port hardware <em>switch priority</em>. For VLAN tagged packets that ingress through CPSW host port, the hardware switch priority can be determined by either the CPPI channel number (<code>P0_RX_REMAP_VLAN = 0</code>) or the packet priority value from the VLAN tag (<code>P0_RX_REMAP_VLAN = 1</code>).</p>
<div class="fragment"><div class="line"><span class="comment">/* Hardware switch priority is taken from packet&#39;s PCP or DSCP */</span></div>
<div class="line">hostPortCfg-&gt;rxVlanRemapEn     = <span class="keyword">true</span>;</div>
<div class="line">hostPortCfg-&gt;rxDscpIPv4RemapEn = <span class="keyword">true</span>;</div>
<div class="line">hostPortCfg-&gt;rxDscpIPv6RemapEn = <span class="keyword">true</span>;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3062"></a>
RX Host Time stamping</h2>
<p>RX Host time stamping is enabled from syscfg to measure the jitter in latency for the Received packets and timestamp value is stored in "rxPktTs" for each received packet(pktInfo). The timestamp values are stored in Ether-Ring driver for Jitter measurement.</p>
<h2><a class="anchor" id="autotoc_md3063"></a>
ALE Configuration</h2>
<ul>
<li>The Default Multicast ALE Entry for PTP has been updated to send PTP Packets only to the Host port. The port mask has been updated to <code>0x1</code> and ALE Entry is added.</li>
<li>Vlan entry for default port vlan is updated to enable <code>forceUntaggedEgressMask</code> for all ports so that vlan tag is not added to ptp packets when ALE is in vlanAware mode.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3064"></a>
Ether-Ring Start Menu</h2>
<p>The following helper options are also provided in the application's start menu to configure the each node uniquely in Etherring:</p>
<div class="fragment"><div class="line">0 - Central Compute Node</div>
<div class="line">1 - Zone Left Node</div>
<div class="line">2 - Zone Right Node</div>
<div class="line">3 - Zone Tail Node</div>
<div class="line">Enter the nodeId : </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3065"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0_freertos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Boards  </td><td class="markdownTableBodyNone">am263x-lp   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">source/networking/enet/core/examples/ether_ring   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md3066"></a>
Packet pool configuration</h1>
<p>To change packet pool configuration from syscfg, please refer to <a class="el" href="PACKETPOOL_CONFIG_TOP.html">Ethernet Packet Pool Allocation Guidelines</a></p>
<h1><a class="anchor" id="autotoc_md3067"></a>
Steps to Run the Example</h1>
<h2><a class="anchor" id="autotoc_md3068"></a>
Build the example</h2>
<ul>
<li>When using CCS projects to build, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li>When using makefiles to build, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3069"></a>
HW Setup</h2>
<p>Make sure you have setup the EVM with cable connections as shown in below Diagram. In addition, follow the steps in the next section.</p>
<div class="image">
<img src="etherring_evm.png" alt="" width="30%"/>
<div class="caption">
Ether-Ring EVM Connections </div></div>
<dl class="section note"><dt>Note</dt><dd>Ethernet cable must be connected to both the ports in loop for the example application to run with expected results.</dd></dl>
<h2><a class="anchor" id="autotoc_md3070"></a>
Run the example</h2>
<h3><a class="anchor" id="autotoc_md3071"></a>
Basic Test</h3>
<p>The simplest test that one can run with the ETHERRING example consists of:</p><ul>
<li>Configuring the each node uniqly in the Ether-ring Network and wait for PTP synchronization to happen for all the Nodes.</li>
<li>Enabling EST and programming a custom EST schedule on the both MAC ports once PTP is synchronized.</li>
<li>Sending Class A and Class D stream packets with different priorities to the adjacent node in clock-wise and anti clock-wise direction in the loop.</li>
</ul>
<p>The steps to run this test are:</p>
<ul>
<li>Connect the MAC port as described in <b>HW Setup</b> section and configure the Nodes using UART Terminal.</li>
<li>Launch a CCS debug session and run the example executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a>.</li>
<li>Application logs such as cycle time, time intervals and gate masks will be printed in the serial console. Sample logs are shown in the next section.</li>
<li>Configure the each node as mentioned in <b>Ether-Ring Start Menu</b> section using UART Terminal around the same time in all the Nodes to start the application and wait for <code>----------ETHERRING DEMONSTRATION COMPLETED----------</code> to be printed on UART Terminal.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3072"></a>
Sample output</h2>
<div class="fragment"><div class="line">==========================</div>
<div class="line">       EtherRing App      </div>
<div class="line">==========================</div>
<div class="line">0 - Central Compute Node</div>
<div class="line">1 - Zone Left Node</div>
<div class="line">2 - Zone Right Node</div>
<div class="line">3 - Zone Tail Node</div>
<div class="line">Enter the nodeId : </div>
<div class="line">0</div>
<div class="line">start to open driver.</div>
<div class="line">EnetAppUtils_reduceCoreMacAllocation: Reduced Mac Address Allocation for CoreId:0 From 4 To 2 </div>
<div class="line"> </div>
<div class="line">Init all configs</div>
<div class="line">----------------------------------------------</div>
<div class="line">sitara-cpsw: init config</div>
<div class="line">Open MAC port 1</div>
<div class="line">EnetPhy_bindDriver:1843 </div>
<div class="line">Open MAC port 2</div>
<div class="line">EnetPhy_bindDriver:1843 </div>
<div class="line">PHY 3 is alive</div>
<div class="line">PHY 12 is alive</div>
<div class="line">sitara-cpsw: Create RX task for regular traffic </div>
<div class="line">initQs() txFreePktInfoQ initialized with 48 pkts</div>
<div class="line">MAC port addr: 70:ff:76:1f:6a:46</div>
<div class="line">sitara-cpsw: default RX flow started</div>
<div class="line">Waiting for GPTP ready!!</div>
<div class="line">Start: uniconf_task</div>
<div class="line">EnetApp_uniconfTask: dbname: NULL</div>
<div class="line">EnetApp_gptpYangConfig:domain=0</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_SINGLE_CLOCK_MODE=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_USE_HW_PHASE_ADJUSTMENT=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_CLOCK_COMPUTE_INTERVAL_MSEC=100</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_FREQ_OFFSET_IIR_ALPHA_START_VALUE=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_FREQ_OFFSET_IIR_ALPHA_STABLE_VALUE=4</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_PHASE_OFFSET_IIR_ALPHA_START_VALUE=1</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_PHASE_OFFSET_IIR_ALPHA_STABLE_VALUE=4</div>
<div class="line">EnetApp_gptpNonYangConfig:XL4_EXTMOD_XL4GPTP_MAX_DOMAIN_NUMBER=1</div>
<div class="line">Start: gptp2d_task</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">portIdx=1 netdev tilld1</div>
<div class="line"> </div>
<div class="line">GPTP ready!!</div>
<div class="line">Current port-state: 3 </div>
<div class="line">Waiting errfor PTP clock to be synchronized!</div>
<div class="line">Start: melcoApp_EST</div>
<div class="line">EnetApp_initTsn:TSN app start done!</div>
<div class="line">ClassA stream count:1</div>
<div class="line">ClassD stream count:1</div>
<div class="line">Waiting for GPTP ready!!</div>
<div class="line">GPTP ready!!</div>
<div class="line">Waiting for GPTP ready!!</div>
<div class="line">GPTP ready!!</div>
<div class="line">Logger_task: started</div>
<div class="line">unibase-1.1.4</div>
<div class="line">INF:cbase:tilld0: has mac: 70:FF:76:1F:6A:46</div>
<div class="line">INF:cbase:tilld1: has mac: 00:00:00:00:00:00</div>
<div class="line">INF:cbase:cb_lld_task_create: uniconf_task stack_size=8192</div>
<div class="line">INF:uconf:simpledb_open:no data is imported</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=xl4-data, enum=0</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=xl4-extmod, enum=1</div>
<div class="line">INF:uconf:uc_hwal_open:</div>
<div class="line">INF:cbase:cb_rawsock_open:combase-1.1.3</div>
<div class="line">INF:cbase:cb_rawsock_open:dmaTxChId=-1 numRxChannels=1 dmaRxChId=-1 nTxPkts=0 nRxPkts=0 pktSize=0</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=ietf-interfaces, enum=2</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=ieee1588-ptp-tt, enum=3</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=ieee802-dot1q-bridge, enum=4</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=excelfore-tsn-remote, enum=5</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=excelfore-netconf-server, enum=6</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=ietf-netconf-monitoring, enum=7</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=ietf-yang-library, enum=8</div>
<div class="line">INF:uconf:get_next_nameid:a new mod=ieee802-dot1ab-lldp, enum=9</div>
<div class="line">INF:uconf:get_nWRN:gptp:gptpgcfg_link_check:can&#39;t read speed</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">portIdx=1 netdev tilld1</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">Waiting errfor PTP clock to be synchronized!</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">portIdx=1 netdev tilld1</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">Waiting errfor PTP clock to be synchronized!</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">portIdx=1 netdev tilld1</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">Waiting errfor PTP clock to be synchronized!</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">portIdx=1 netdev tilld1</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">Waiting errfor PTP clock to be synchronized!</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">Cpsw_handleLinkUp:1645 </div>
<div class="line">MAC Port 1: link up</div>
<div class="line">INF:cbase:cbl_query_response:tilld0: link UP, speed=1000, duplex=1 !!!!</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">portIdx=1 netdev tilld1</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">Waiting errfor PTP clock to be synchronized!</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">WRN:gptp:000013-500229:waiting_for_pdelay_interval_timer_proc:portIndex=1, sourcePortIdentity=34:08:E1:FF:FE:84:DB:CF, thisClock=70:FF:76:FF:FE:1F:6A:46, neighborPropDelay=392</div>
<div class="line">Cpsw_handleLinkUp:1645 </div>
<div class="line">MAC Port 2: link up</div>
<div class="line">INF:cbase:cbl_query_response:tilld1: link UP, speed=1000, duplex=1 !!!!</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">portIdx=1 netdev tilld1</div>
<div class="line"> </div>
<div class="line">Current port-state: 3 </div>
<div class="line">Waiting errfor PTP clock to be synchronized!</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">WRN:gptp:000014-625027:waiting_for_pdelay_interval_timer_proc:portIndex=2, sourcePortIdentity=34:08:E1:FF:FE:84:DD:31, thisClock=70:FF:76:FF:FE:1F:6A:46, neighborPropDelay=392</div>
<div class="line">portIdx=0 netdev tilld0</div>
<div class="line"> </div>
<div class="line">syncFlag: 0</div>
<div class="line"> </div>
<div class="line">Current port-state: 9 </div>
<div class="line">EnetApp_enableCBS</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:ydbi_get_item_ifk4vk1:no data</div>
<div class="line">INF:uconf:get_queue_map_params:netdev=tilld0, num_tc=0</div>
<div class="line">The following AdminList param will be configured for EST:</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=0 ns, end=19999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCoCC (0x84), start=20000 ns, end=124999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=125000 ns, end=144999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=145000 ns, end=249999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=250000 ns, end=269999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=270000 ns, end=374999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=375000 ns, end=394999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=395000 ns, end=499999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=500000 ns, end=519999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=520000 ns, end=624999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=625000 ns, end=644999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=645000 ns, end=749999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=750000 ns, end=769999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=770000 ns, end=874999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=875000 ns, end=894999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=895000 ns, end=999999 ns, dur=105000 ns</div>
<div class="line">Base time=20000000000ns,Cycle time=1000000ns</div>
<div class="line">Set admin control list succesfully</div>
<div class="line">EnetApp_enableCBS</div>
<div class="line">INF:uconf:create_semname_with_dbname:null dbname is specified.</div>
<div class="line">INF:uconf:ydbi_get_item_ifk4vk1:no data</div>
<div class="line">INF:uconf:get_queue_map_params:netdev=tilld1, num_tc=0</div>
<div class="line">INF:uconf:get_queue_map_params:netdev=tilld0, num_tc=8</div>
<div class="line">INF:cbase:TAS state is set to 2</div>
<div class="line">INF:cbase:TAS operational list status updated:</div>
<div class="line">INF:cbase:TAS state is set to 1</div>
<div class="line">INF:cbase:Successfully configure TAS </div>
<div class="line">The following AdminList param will be configured for EST:</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=0 ns, end=19999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCoCC (0x84), start=20000 ns, end=124999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=125000 ns, end=144999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=145000 ns, end=249999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=250000 ns, end=269999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=270000 ns, end=374999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=375000 ns, end=394999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=395000 ns, end=499999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=500000 ns, end=519999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=520000 ns, end=624999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=625000 ns, end=644999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=645000 ns, end=749999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=750000 ns, end=769999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=770000 ns, end=874999 ns, dur=105000 ns</div>
<div class="line">GateMask[7..0]=oCCCoCCC (0x88), start=875000 ns, end=894999 ns, dur=20000 ns</div>
<div class="line">GateMask[7..0]=oCCCCCCC (0x80), start=895000 ns, end=999999 ns, dur=105000 ns</div>
<div class="line">Base time=20000000000ns,Cycle time=1000000ns</div>
<div class="line">Set admin control list succesfully</div>
<div class="line">INF:uconf:get_queue_map_params:netdev=tilld1, num_tc=8</div>
<div class="line">INF:cbase:TAS state is set to 2</div>
<div class="line">INF:cbase:TAS operational list status updated:</div>
<div class="line">INF:cbase:TAS state is set to 1</div>
<div class="line">INF:cbase:Successfully configure TAS </div>
<div class="line">WRN:gptp:000018-746101:md_pdelay_resp_sm_recv_req: port=2, expected SeqID=10723, but received=10724</div>
<div class="line">Starting the Stream Traffic</div>
<div class="line">RxTs and CurrentTs values stored</div>
<div class="line">[RXTS]: 29954385101</div>
<div class="line">[RXTS]: 29954510117</div>
<div class="line">[RXTS]: 29954635123</div>
<div class="line">[RXTS]: 29954760134</div>
<div class="line">[RXTS]: 29954885145</div>
<div class="line">[RXTS]: 29955010066</div>
<div class="line">[RXTS]: 29955135082</div>
<div class="line">[RXTS]: 29955260083</div>
<div class="line">[RXTS]: 29955385094</div>
<div class="line">[RXTS]: 29955510120</div>
<div class="line">[RXTS]: 29955635121</div>
<div class="line">[RXTS]: 29955760127</div>
<div class="line">[RXTS]: 29955885143</div>
<div class="line">[RXTS]: 29956010069</div>
<div class="line">[RXTS]: 29956135075</div>
<div class="line">[RXTS]: 29956260086</div>
<div class="line">[RXTS]: 29956385097</div>
<div class="line">[RXTS]: 29956510113</div>
<div class="line">[RXTS]: 29956635119</div>
<div class="line">[RXTS]: 29956760130</div>
<div class="line">[RXTS]: 29956885126</div>
<div class="line">[RXTS]: 29957010072</div>
<div class="line">[RXTS]: 29957135078</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">----------ETHERRING DEMONSTRATION COMPLETED----------</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3073"></a>
Troubleshooting issues</h2>
<h1><a class="anchor" id="autotoc_md3074"></a>
See Also</h1>
<p><a class="el" href="NETWORKING.html">Ethernet And Networking</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
