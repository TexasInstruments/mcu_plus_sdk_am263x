<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263x MCU+ SDK: ADC PPB Delay</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263x MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_ADC_PPB_DELAY.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ADC PPB Delay </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2005">Introduction</a><ul><li class="level2"><a href="#autotoc_md2006">Example Description</a><ul><li class="level3"><a href="#autotoc_md2007">Note</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md2008">SOC Configurations</a></li>
<li class="level2"><a href="#autotoc_md2009">PPB Configurations</a></li>
<li class="level2"><a href="#autotoc_md2010">Interrupt Configurations</a></li>
<li class="level2"><a href="#autotoc_md2011">ISR configurations</a></li>
<li class="level2"><a href="#autotoc_md2012">EPWM Configurations</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md2013">External Connections</a><ul><li class="level2"><a href="#autotoc_md2014">AM263Px-CC E2 or AM263x-CC E2 or AM261x-SOM E1</a></li>
<li class="level2"><a href="#autotoc_md2015">AM263x-CC E1</a></li>
<li class="level2"><a href="#autotoc_md2016">AM263Px-LP or AM263x-LP</a></li>
<li class="level2"><a href="#autotoc_md2017">AM261x-LP</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md2018">Watch Variables</a></li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_ADC_PPB_DELAY_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md2019">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md2020">See Also</a></li>
<li class="level1"><a href="#autotoc_md2021">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_adc_ppb_delay"></a></p>
<h1><a class="anchor" id="autotoc_md2005"></a>
Introduction</h1>
<h2><a class="anchor" id="autotoc_md2006"></a>
Example Description</h2>
<p>This example demonstrates the PPB delay time stamp feature of the ADC. The PPBs (Post Processing Blocks) in ADC offer timestamping the delay between the conversion of given SOC and the trigger(associated) occurrence.</p>
<p> <style>div.image img[src="am263_adc_ppb_delay.png"]{width:50%}</style> </p><div class="image">
<img src="am263_adc_ppb_delay.png" alt=""/>
<div class="caption">
Delay Measurement</div></div>
 <h3><a class="anchor" id="autotoc_md2007"></a>
Note</h3>
<ul>
<li>if a trigger occurred and the conversion occurred immediately, i.e., without any delay, the PPB captures a value '2'. and contains '0' as reset value. Hence, 0 in Delay represents SOC hasn't converted or there is an overflow of Delay counter.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2008"></a>
SOC Configurations</h2>
<ol type="1">
<li>SOC 0 :<ol type="a">
<li>Trigger is set to EPWM0SOCA.</li>
<li>Sample window : 17</li>
<li>Samples on Channel 0 (arbitrary)</li>
</ol>
</li>
<li>SOC 1 :<ol type="a">
<li>Trigger is set to EPWM1SOCA.</li>
<li>Sample window : 17</li>
<li>Samples on Channel 1 (arbitrary)</li>
</ol>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md2009"></a>
PPB Configurations</h2>
<ol type="1">
<li>PPB 1 is set for SOC 0</li>
<li>PPB 2 is set for SOC 1 </li>
</ol>
<h2><a class="anchor" id="autotoc_md2010"></a>
Interrupt Configurations</h2>
<p>INT xbar0, INT xbar1 are set for ADC 1 INT 1 and ADC 1 INT 2 respectively.</p>
<ol type="1">
<li>ADC 1 INT 1 :<ul>
<li>triggered by EOC/SOC0</li>
<li>triggers ISR App_adcISR0()</li>
</ul>
</li>
<li>ADC 1 INT 2 :<ul>
<li>triggered by EOC/SOC1</li>
<li>triggers ISR App_adcISR1() </li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md2011"></a>
ISR configurations</h2>
<ol type="1">
<li>App_adcISR0 :<ul>
<li>reads the delays in SOC0 and SOC1.</li>
<li>clears the INT 1 flag</li>
</ul>
</li>
<li>App_adcISR1 :<ul>
<li>clears the INT 1 flag </li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md2012"></a>
EPWM Configurations</h2>
<ol type="1">
<li>EPWM 0 :<ul>
<li>TimeBase Period is set to 2048.</li>
<li>Generates EPWM0SOCA when the TimeBase counter equals TimeBase Period.</li>
<li>Counter Mode will be set to Up-count mode in the example.</li>
</ul>
</li>
<li>EPWM 1 :<ul>
<li>TimeBase Period is set to 9999.</li>
<li>Generates EPWM1SOCA when the TimeBase Counter equals TimeBase Period.</li>
<li>Counter Mode will be set to Up-count mode in the example.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md2013"></a>
External Connections</h1>
<h2><a class="anchor" id="autotoc_md2014"></a>
AM263Px-CC E2 or AM263x-CC E2 or AM261x-SOM E1</h2>
<p>Feed analog inputs to channels</p><ul>
<li>ADC1_AIN0 - HSEC Pin 12</li>
<li>ADC1_AIN1 - HSEC Pin 14 </li>
</ul>
<h2><a class="anchor" id="autotoc_md2015"></a>
AM263x-CC E1</h2>
<p>Feed analog inputs to channels</p><ul>
<li>ADC1_AIN0 - HSEC Pin 18</li>
<li>ADC1_AIN1 - HSEC Pin 20</li>
</ul>
<h2><a class="anchor" id="autotoc_md2016"></a>
AM263Px-LP or AM263x-LP</h2>
<p>Feed analog inputs to channels</p><ul>
<li>ADC1_AIN0 - J1/3 Pin 24</li>
<li>ADC1_AIN1 - J1/3 Pin 29 </li>
</ul>
<h2><a class="anchor" id="autotoc_md2017"></a>
AM261x-LP</h2>
<p>Feed analog inputs to channels</p><ul>
<li>ADC1_AIN0 - J1 Pin 24</li>
<li>ADC1_AIN1 - J5 Pin 42 </li>
</ul>
<h1><a class="anchor" id="autotoc_md2018"></a>
Watch Variables</h1>
<ul>
<li>gAdc1soc0Delay[] - holds the delay values for ADC1_SOC0</li>
<li>gAdc1soc1Delay[] - holds the delay values for ADC1_SOC1 </li>
</ul>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_ADC_PPB_DELAY_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am263x-cc, am263x-lp   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/adc/adc_ppb_delay/   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2019"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Establish connections as mentioned in External Connections section</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
<li>Using the watch variables, view the ADC conversion results.</li>
<li>Observe 6 EPWM waveforms. After ADC input voltage exceeds the PPB limit, PWMs get tripped.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2020"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_ADC_PAGE.html">ADC</a></p>
<h1><a class="anchor" id="autotoc_md2021"></a>
Sample Output</h1>
<p>Shown below is a sample output when the application is run,</p>
<div class="fragment"><div class="line">ADC PPB Delay Test Started</div>
<div class="line">Delays associated with</div>
<div class="line">conversion  SOC 0   SOC 1</div>
<div class="line">    16      13      2</div>
<div class="line">    24      2       18</div>
<div class="line">    41      35      2</div>
<div class="line">    66      57      2</div>
<div class="line">    91      2       41</div>
<div class="line">    108     12      2</div>
<div class="line">    116     2       19</div>
<div class="line">    133     34      2</div>
<div class="line">    158     56      2</div>
<div class="line">    183     2       42</div>
<div class="line">    200     11      2</div>
<div class="line">    208     2       20</div>
<div class="line">    225     33      2</div>
<div class="line">    250     55      2</div>
<div class="line">ADC PPB Delay Test Passed</div>
<div class="line">All tests have passed!!</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
