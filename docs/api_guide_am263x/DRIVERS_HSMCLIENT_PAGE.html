<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263x MCU+ SDK: HSM client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263x MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263x MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('DRIVERS_HSMCLIENT_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">HSM client </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1311">Introduction</a></li>
<li class="level1"><a href="#autotoc_md1312">MCU+SDK v10.02.00 Supported Services</a></li>
<li class="level1"><a href="#autotoc_md1313">HSM Client message format.</a><ul><ul><li class="level3"><a href="#autotoc_md1314">Message structure description.</a></li>
</ul>
</ul>
</li>
<li class="level1"><a href="#autotoc_md1315">HSM client Initialization.</a></li>
<li class="level1"><a href="#autotoc_md1316">HSM Client generic service flow.</a></li>
<li class="level1"><a href="#autotoc_md1317">HSM Client Load TIFS-MCU API and BootNotify message.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_GET_VERSION">HSM Client GetVersion Service.</a><ul><ul><li class="level3"><a href="#autotoc_md1318">Example Usage</a></li>
</ul>
</ul>
</li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_GET_UID">HSM Client GetUID Service.</a><ul><ul><li class="level3"><a href="#autotoc_md1319">Example Usage</a></li>
</ul>
</ul>
</li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_SET_FIREWALL">HSM Client SetFirewall Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_SET_FIREWALL_INTERRUPT">HSM Client Set Firewall Interrupt Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_OPEN_DEBUG_FIREWALL">HSM Client Open Debug Firewall Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_READ_OTP_ROW">HSM Client Read OTP Row Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_WRITE_OTP_ROW">HSM Client Write OTP Row Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_LOCK_OTP_ROW">HSM Client Lock OTP Row Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_GET_OTP_ROW_COUNT">HSM Client Get OTP Row Count Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_GET_OTP_ROW_PROTECTION">HSM Client Get OTP Row Protection Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_PROC_AUTH_BOOT">HSM Client Proc Auth Boot Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_READ_SW_REVISION">HSM Client Read SW Revision Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_WRITE_SW_REVISION">HSM Client Write SW Revision Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_GET_KEK">HSM Client Get Derived KEK Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_KEYWRITER">HSM Client Key Writer Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_getRandomNum">HSM Client Get Random Number Service.</a></li>
<li class="level1"><a href="#DRIVERS_HSMCLIENT_importKeyring">HSM Client Import Keyring Service.</a></li>
<li class="level1"><a href="#autotoc_md1320">APIs</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_security_hsmclient"></a></p>
<dl class="section note"><dt>Note</dt><dd>In the following document and in <b>TIFS-MCU</b> document the term used to refer to the Firmware which runs on HSM core is <b>TIFS-MCU Firmware</b>. Please note that the terms 1.**HSMRt Firmware** and 2.**HSMRt** are synonymous to <b>TIFS-MCU Firmware</b>.</dd></dl>
<h1><a class="anchor" id="autotoc_md1311"></a>
Introduction</h1>
<ul>
<li>The objective of HSM client is to provide APIs for accessing HSM services. Below given model explains the use of HSM client graphically. It uses <a class="el" href="DRIVERS_SIPC_NOTIFY_PAGE.html">SIPC Notify</a> driver as a low level message passing mechanism to talk to HSM M4 core. HSM client APIs can be used with either <b>FreeRTOS</b> or <b>noRTOS</b> application.</li>
<li>The&#160;HSM Server&#160;provides APIs that will read the incoming request in the form of SIPC message and provide appropriate service based on it. The application which uses HSM server is also known as&#160;TIFS-MCU (HSM runtime firmware).&#160;</li>
</ul>
<p> <style>div.image img[src="sipc_communication_model.png"]{width:30%}</style> </p><div class="image">
<img src="sipc_communication_model.png" alt=""/>
<div class="caption">
HSM CLIENT communication model</div></div>
<ul>
<li>Along side providing services at runtime <b>TIFS-MCU</b> also enables <b>secure boot flow</b>. It is responsible for decrypting and authenticating&#160;R5Fs application images&#160;and sends a notification to SBL if it is a valid app image , later SBL will boot the R5 applications to respective cores.</li>
<li>The trusted R5Fs cores which can communicate with HSM are known as <b>Secure hosts</b>.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>For HS-SE device specific services, please contact your TI representative to get access to TIFS-MCU add-on package.</dd></dl>
<h1><a class="anchor" id="autotoc_md1312"></a>
MCU+SDK v10.02.00 Supported Services</h1>
<ul>
<li><b>Following services are supported in MCU+SDK v10.02.00</b> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service Name  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Device Compatibility   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BootNotify  </td><td class="markdownTableBodyNone">A special message sent by TIFS-MCU Firmware to indicate SBL that TIFS-MCU boot was successful  </td><td class="markdownTableBodyNone">All   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GetVersion  </td><td class="markdownTableBodyNone">Get the current version of TIFS-MCU Firmware  </td><td class="markdownTableBodyNone">All   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GetUID  </td><td class="markdownTableBodyNone">Get the unique ID of the device  </td><td class="markdownTableBodyNone">All   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Firewall  </td><td class="markdownTableBodyNone">Configures the MPU firewall configuration  </td><td class="markdownTableBodyNone">All   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Set Firewall Interrupt  </td><td class="markdownTableBodyNone">Configures the MPU firewall interrupt  </td><td class="markdownTableBodyNone">All   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Get Random Number  </td><td class="markdownTableBodyNone">Get the random number as generated by TRNG engine  </td><td class="markdownTableBodyNone">All   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Debug  </td><td class="markdownTableBodyNone">By default debug port for all R5F and HSM is closed. Secure R5Fs can request debug port access via runtime Debug services  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Read OTP Row Data  </td><td class="markdownTableBodyNone">Get the data from Extended OTP row  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Write OTP Row Data  </td><td class="markdownTableBodyNone">Write the data to Extended OTP row  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Lock OTP Row  </td><td class="markdownTableBodyNone">Lock the Extended OTP row  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Get OTP Row Count  </td><td class="markdownTableBodyNone">Get the count from Extended OTP row  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Get OTP Row Protection  </td><td class="markdownTableBodyNone">Get the row protection info from Extended OTP row  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Proc Auth Boot  </td><td class="markdownTableBodyNone">Perform secure boot checks for application images  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Read SW Revision  </td><td class="markdownTableBodyNone">Get the software revision for SBL, HSM, Application  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Write SW Revision  </td><td class="markdownTableBodyNone">Write the software revision for SBL, HSM, Application  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Get DKEK  </td><td class="markdownTableBodyNone">Get Derived KEK  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Import Keyring  </td><td class="markdownTableBodyNone">Import keyring in TIFS-MCU  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Key Writer  </td><td class="markdownTableBodyNone">Converting device from HSFS to HSSE  </td><td class="markdownTableBodyNone">HS-SE only   </td></tr>
</table>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1313"></a>
HSM Client message format.</h1>
<ul>
<li>Which public cores are going to be <b>secure hosts</b> will be decided by sysconfig configurations of <b>TIFS-MCU</b> at compile time and user has to make sure that similar configurations is done on the R5F side as well.</li>
<li>Below mentioned is the Message structure defined by <a class="el" href="DRIVERS_SIPC_NOTIFY_PAGE.html">SIPC Notify</a> driver. HSM client populates a SIPC message with relevant parameters and sends this message to HSM Server.</li>
</ul>
<p> <style>div.image img[src="sipc_message_ex.png"]{width:40%}</style> </p><div class="image">
<img src="sipc_message_ex.png" alt=""/>
<div class="caption">
SIPC message structure</div></div>
<h3><a class="anchor" id="autotoc_md1314"></a>
Message structure description.</h3>
<ul>
<li><b>DestClientID</b> -: Client Id to which a message is going to be sent. In case of R5F -&gt; HSM ( R5 send message to HSM ) this field will always be <b>equal to 1</b> because TIFS-MCU is a NORTOS application and only one client is required.</li>
<li><b>SrcClientID</b> -: Client Id from which a message is going to be sent. In case of HSM -&gt; R5F( HSM send message to R5 ) this field will always be equal to 1.</li>
<li><b>flags</b> -: Used for ACK and NACK response signals based on weather a request has been processed correctly or not.<ul>
<li>Client side signals 1. <b>AOP</b> -&gt; ACK on process 2. <b>NOP</b> -&gt; No ACK on process</li>
<li>Server side signals 1. <b>ACK</b> -&gt; request processed successfully 2. <b>NACK</b> -&gt; request process failure.</li>
</ul>
</li>
<li><b>Service_type</b> -: Type of a requested service.</li>
<li><b>Pointer_to_args</b> -: Pointer to the arguments required by a particular service.</li>
<li><b>CRC16(args)</b> -: CRC16 to check the integrity of arguments.</li>
<li><b>CRC16(msg)</b> -: CRC16 to check the integrity of message.</li>
<li>The argument will reside in <b>OCRAM</b> and only its pointer is going to be passed in the message itself. When HSM receive the message it reads the argument content from OCRAM and process it. Thus other information needed by HSM server can be passed along with the message through HSM MBOX. <dl class="section note"><dt>Note</dt><dd>It is strongly suggested that user application must cleary define a boundary between secure R5FSS and non secure R5FSS core's OCRAM memory so that non secure core cannot access the parameters of HSM message. One way to define such boundary is to protect some predefined memory region in OCRAM with firewalls so that only secure cores can access this particular memory region.</dd></dl>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1315"></a>
HSM client Initialization.</h1>
<ul>
<li>User needs to add an instance of HSM client in <b>Secure R5F's</b> sysconfig configuration.</li>
<li>Select the <b>Secure_host_id</b> for the current <b>secure R5F</b> core. <dl class="section note"><dt>Note</dt><dd>Make sure that <b>SIPC Message Queue Depth, Number of secure Hosts</b> fields are configured same as in <b>HSM Server's</b> sysconfig.</dd></dl>
 <style>div.image img[src="hsmclient_syscfg.png"]{width:30%}</style> <div class="image">
<img src="hsmclient_syscfg.png" alt=""/>
<div class="caption">
HSM Client sysconfig</div></div>
</li>
<li>Based on the selected configuration <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga3b55ad3229c657ca509f9b29451e37e5">HsmClient_init()</a> will be called during <b>system_init()</b>. <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga3b55ad3229c657ca509f9b29451e37e5" title="Initialize the HSM client for current core.">HsmClient_init()</a> will set the necessary meta data and calls <b><a class="el" href="group__DRV__SIPC__NOTIFY__MODULE.html#ga41b553325afa726d6add36b361d7bdbc" title="Initialize Secure IPC notify module.">SIPC_init()</a></b> function.</li>
<li>Refer to sysconfig generated file <b>ti_drivers_config.c</b> for more details.</li>
<li>After initialization user needs to instantiate <a class="el" href="structHsmClient__t.html" title="This is a HSMClient type which holds the information needed by hsm client to communicate with HSM .">HsmClient_t</a> and use <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga152f4adbca2128ca988769beca7009aa" title="register a client to a particular ClientId">HsmClient_register()</a> to register a client with a unique client Id.</li>
<li>There can be at max <b>32</b> distinct registered clients at a time. If user tries to register any more clients <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga152f4adbca2128ca988769beca7009aa" title="register a client to a particular ClientId">HsmClient_register()</a> api will return Failure.</li>
<li>The idea here is that every <b>RTOS</b> task has to register a <b>unique</b> <b>client</b> <b>Id</b> to request services from HSM Server.</li>
<li><dl class="section note"><dt>Note</dt><dd>If user is not using sysconfig then it is important to call <b><a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga3b55ad3229c657ca509f9b29451e37e5" title="Initialize the HSM client for current core.">HsmClient_init()</a></b> with appropriate <a class="el" href="structSIPC__Params.html" title="Parameters used by SIPC_init.">SIPC_Params</a> before any service function calls.</dd></dl>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1316"></a>
HSM Client generic service flow.</h1>
<ul>
<li>Below mentioned are the generic steps that every service request made by HSM client follows except <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga65e1efbec7ecc3f8a2c27e8a26b9ead0">HSM_MSG_BOOT_NOTIFY</a></li>
</ul>
<p> <style>div.image img[src=" hsmclient_generic_msg.png"]{width:35% }</style> </p><div class="image">
<img src="hsmclient_generic_msg.png" alt=""/>
<div class="caption">
HSM Client generic service flow</div></div>
<ul>
<li>First instantiate <a class="el" href="structHsmClient__t.html" title="This is a HSMClient type which holds the information needed by hsm client to communicate with HSM .">HsmClient_t</a> and register this client object using <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga152f4adbca2128ca988769beca7009aa" title="register a client to a particular ClientId">HsmClient_register()</a>.</li>
<li>populate <b>ReqMsg</b> field of <a class="el" href="structHsmClient__t.html" title="This is a HSMClient type which holds the information needed by hsm client to communicate with HSM .">HsmClient_t</a> with appropriate paramters.<ul>
<li>ReqMsg → destClientId = 0</li>
<li>ReqMsg → srcClientId = current client ID.</li>
<li>ReqMsg → serType = supported service MACRO.</li>
<li>ReqMsg → flags = AOP if ack is expected otherwise NAOP</li>
<li>ReqMsg → args = pointer to message structure based on service type.</li>
<li>ReqMsg → crcArgs = crc of args which is in OCRAM</li>
<li>ReqMsg → crcMsg = crc of the ReqMsg without crcMsg field.</li>
</ul>
</li>
<li>Use <a class="el" href="group__DRV__SIPC__NOTIFY__MODULE.html#gaf0c62c59f382b1cad7b460f7a016b7a1" title="Send message to a specific remote core and specific client ID on that remote core.">SIPC_sendMsg()</a> Api to send the 13 byte message to HSM.</li>
<li>If <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga0842e3d812796be34207849e8dc8dc3a">HSM_FLAG_AOP</a> flag is selected then pend on <a class="el" href="structHsmClient__t.html#a7cd9b04785e82bb2cee46684529ed624">HsmClient_t::Semaphore</a> till timeout exception occurs or a Response message is received. If <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga5f0c48b13ab8d657a61ff359466f16e8">HSM_FLAG_NAOP</a> flag is passed then server will not respond with message.</li>
<li><a class="el" href="hsmclient_8c.html#a0bd2778df320fe0eebb2b0b09db8384f">HsmClient_isr()</a> will receive the response message and copy the same in to <a class="el" href="structHsmClient__t.html#ad1d591cabaa37b805d043bbc96b76efe">HsmClient_t::RespMsg</a> and post the semaphore. As this ISR is blocking we want to quickly read the message and exit it.</li>
<li>check RespMsg integrity i.e CRC16 for HSM message and CRC16 for args. if integrity check fails then return SystemP_FAILURE.</li>
<li>If HSM_FLAG_ACK is received then returns SystemP_SUCCESS else SystemP_FAILURE.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1317"></a>
HSM Client Load TIFS-MCU API and BootNotify message.</h1>
<ul>
<li>HSM client Module is used by <b>SBL</b> to load <b>TIFS-MCU Fiwmware</b> on HSM core.</li>
<li>SBL includes <b>hsmRtImg.h</b> file which contains <b>TIFS-MCU Firmware</b> in byte format, next the TIFS-MCU will be built along with SBL application.</li>
<li><b>SBL</b> instantiates HSM client Module via sysconfig and calls HsmClient_loadHSMRtFirmware() which will load the TIFS-MCU Firmware.</li>
<li>After loading TIFS-MCU Firmware <b>SBL</b> application will wait for a <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga65e1efbec7ecc3f8a2c27e8a26b9ead0">HSM_MSG_BOOT_NOTIFY</a> message from HSM server. This messages indicates that TIFS-MCU load is successfull and HSM Server is now ready to take requests from <b>Secure R5F</b> cores.</li>
<li>SBL will call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gaead2ef4c3b6ee91e2a0a8789fa33e79a" title="Current core will wait for bootnotify message from HSM core.">HsmClient_waitForBootNotify()</a> API which waits till it receives <b>BootNotify</b> message.</li>
<li>Similarly on the HSM side once the <b>TIFS-MCU</b> initialization sequence completes it calls <b>HsmServer_sendBootNotify()</b> API to send a <b>BootNotify</b> message.</li>
<li>Boot Notify sequence Flow chart.</li>
</ul>
<p> <style>div.image img[src="BootNotifyFlow.png"]{width:50%}</style> </p><div class="image">
<img src="BootNotifyFlow.png" alt=""/>
<div class="caption">
Boot Notify sequence Flow chart</div></div>
<ul>
<li><a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gaead2ef4c3b6ee91e2a0a8789fa33e79a" title="Current core will wait for bootnotify message from HSM core.">HsmClient_waitForBootNotify()</a> API takes two parameters one of them is <b>timeToWaitInTicks</b>, This parameter defines how long SBL will wait for HSM_MSG_BOOT_NOTIFY message .User can change this parameter in SBL source code as per need. <dl class="section note"><dt>Note</dt><dd>Currently the <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gaead2ef4c3b6ee91e2a0a8789fa33e79a" title="Current core will wait for bootnotify message from HSM core.">HsmClient_waitForBootNotify()</a>'s <b>timeToWaitInTicks</b> paramter is set to SystemP_WAIT_FOREVER i.e SBL will keep waiting for HSM_MSG_BOOT_NOTIFY message indefinitely.</dd></dl>
</li>
<li>refer <a class="el" href="BOOTFLOW_GUIDE.html">Understanding the bootflow and bootloaders</a> for more information on SBL(Secondary Boot loader)</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_GET_VERSION"></a>
HSM Client GetVersion Service.</h1>
<ul>
<li>This service is used to get the current version of <b>TIFS-MCU</b> <b>Firmware</b> running on HSM core.</li>
<li>User needs to instantiate HsmVer_t object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga70b2b53821f5782e083984e34df972b7" title="populates the current HSMRT version Id by default the hsm flag is set to HSM_FLAG_AOP for this servic...">HsmClient_getVersion()</a> API to get the current TIFS-MCU's version.</li>
<li>Refer to <a class="el" href="unionHsmVer__t__.html" title="type for reading HSMRt version.">HsmVer_t_</a> for the description of different fields that defines a unique TIFS-MCU Firmware version. If User needs to know just the unique 64 bit version ID then, user should read <a class="el" href="unionHsmVer__t__.html#a8c5ddfe5a8c5a319511da15173f1bddf">HsmVer_t_::HsmrtVer</a> a 64 bit field which combines all the different fields of <a class="el" href="unionHsmVer__t__.html" title="type for reading HSMRt version.">HsmVer_t_</a>.</li>
<li><a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga70b2b53821f5782e083984e34df972b7" title="populates the current HSMRT version Id by default the hsm flag is set to HSM_FLAG_AOP for this servic...">HsmClient_getVersion()</a> API takes <b>timeToWaitInTicks</b> parameter as input which dictates how long application will wait for the response from HSM core. If the timeout exception occurs <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga70b2b53821f5782e083984e34df972b7" title="populates the current HSMRT version Id by default the hsm flag is set to HSM_FLAG_AOP for this servic...">HsmClient_getVersion()</a> API return SystemP_TIMEOUT. </li>
</ul>
<h3><a class="anchor" id="autotoc_md1318"></a>
Example Usage</h3>
<ul>
<li>Demo code for <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga3b55ad3229c657ca509f9b29451e37e5" title="Initialize the HSM client for current core.">HsmClient_init()</a>. This will be autogenerated by sysconfig.</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * HSM Client</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* memory assigned for each R5x &lt;-&gt; HSM channel */</span></div>
<div class="line">uint8_t gQueue_R5ToHsm[SIPC_NUM_R5_CORES][SIPC_QUEUE_LENGTH*<a class="code" href="sipc__notify__cfg_8h.html#ac2fdfb0ed32bb14a82ca144071714220">SIPC_MSG_SIZE</a>] <a class="code" href="group__lld__ethernet.html#ga8c1dfc1ccf00a08192611433ee7f17b4">__attribute__</a>((aligned(8),section(<span class="stringliteral">&quot;.bss.sipc_hsm_queue_mem&quot;</span>)));</div>
<div class="line">uint8_t gQueue_HsmToR5[SIPC_NUM_R5_CORES][SIPC_QUEUE_LENGTH*<a class="code" href="sipc__notify__cfg_8h.html#ac2fdfb0ed32bb14a82ca144071714220">SIPC_MSG_SIZE</a>] <a class="code" href="group__lld__ethernet.html#ga8c1dfc1ccf00a08192611433ee7f17b4">__attribute__</a>((aligned(8),section(<span class="stringliteral">&quot;.bss.sipc_r5f_queue_mem&quot;</span>)));</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> HsmClient_config(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structSIPC__Params.html">SIPC_Params</a> sipcParams;</div>
<div class="line">    int32_t status;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* initialize parameters to default */</span></div>
<div class="line">    <a class="code" href="group__DRV__SIPC__NOTIFY__MODULE.html#gafdb4148be02e87da0c0e51ed59d99f51">SIPC_Params_init</a>(&amp;sipcParams);</div>
<div class="line"> </div>
<div class="line">    sipcParams.<a class="code" href="structSIPC__Params.html#a1bfa9db788f35bdecf497a1a98edd4bc">ipcQueue_eleSize_inBytes</a> = <a class="code" href="sipc__notify__cfg_8h.html#ac2fdfb0ed32bb14a82ca144071714220">SIPC_MSG_SIZE</a>;</div>
<div class="line">    sipcParams.<a class="code" href="structSIPC__Params.html#a3e3afbcab9e012de292475141f55cf90">ipcQueue_length</a> = SIPC_QUEUE_LENGTH ;</div>
<div class="line">    <span class="comment">/* list the cores that will do SIPC communication with this core</span></div>
<div class="line"><span class="comment">    * Make sure to NOT list &#39;self&#39; core in the list below</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    sipcParams.<a class="code" href="structSIPC__Params.html#a38ea5e6c8f8dba16b482f0a24f94874a">numCores</a> = 1;</div>
<div class="line">    sipcParams.<a class="code" href="structSIPC__Params.html#a14cab21bb80a790014c6ac12b4a904b0">coreIdList</a>[0] = <a class="code" href="group__DRV__SIPC__NOTIFY__MODULE.html#gga8602ce075b94d70bcde46634dd6ab8d2a7d22d9c30e99359f1c7e59fea1e48ea5">CORE_INDEX_HSM</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* This is HSM -&gt; R5F queue */</span></div>
<div class="line">    sipcParams.<a class="code" href="structSIPC__Params.html#a187a5d40b35a335a03619580b9eecb58">tx_SipcQueues</a>[<a class="code" href="group__DRV__SIPC__NOTIFY__MODULE.html#gga8602ce075b94d70bcde46634dd6ab8d2a7d22d9c30e99359f1c7e59fea1e48ea5">CORE_INDEX_HSM</a>] = (uintptr_t)gQueue_HsmToR5[0] ;</div>
<div class="line">    sipcParams.<a class="code" href="structSIPC__Params.html#acc0e3df1965dc7364dfec784fa90bcdf">rx_SipcQueues</a>[<a class="code" href="group__DRV__SIPC__NOTIFY__MODULE.html#gga8602ce075b94d70bcde46634dd6ab8d2a7d22d9c30e99359f1c7e59fea1e48ea5">CORE_INDEX_HSM</a>] = (uintptr_t)gQueue_R5ToHsm[0] ;</div>
<div class="line">    sipcParams.<a class="code" href="structSIPC__Params.html#a2c25f5d7c4028f22038dda53a58686ed">secHostCoreId</a>[<a class="code" href="group__DRV__SIPC__NOTIFY__MODULE.html#gga8602ce075b94d70bcde46634dd6ab8d2aec8bd284ef7986d731a488732fbdf2a8">CORE_INDEX_SEC_MASTER_0</a>] = <a class="code" href="group__DRV__SIPC__NOTIFY__MODULE.html#ggad5da1faa1249071c597b9dac202f2ae4aa782ed37b1959ba8b9bcc5a9a375802a">CORE_ID_R5FSS0_0</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* initialize the HsmClient module */</span></div>
<div class="line">    status = <a class="code" href="group__DRV__HSMCLIENT__MODULE.html#ga3b55ad3229c657ca509f9b29451e37e5">HsmClient_init</a>(&amp;sipcParams);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status==<a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
</div><!-- fragment --><ul>
<li>Registering <a class="el" href="structHsmClient__t.html" title="This is a HSMClient type which holds the information needed by hsm client to communicate with HSM .">HsmClient_t</a> with client ID and requesting current TIFS-MCU Version.</li>
</ul>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#define APP_CLIENT_ID                  (0x02)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Demo Application code on R5 */</span></div>
<div class="line"><span class="keywordtype">void</span> HsmClientApp_start(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    int32_t status ;</div>
<div class="line">    <a class="code" href="structHsmClient__t.html">HsmClient_t</a> client ;</div>
<div class="line">    HsmVer_t *hsmVer = malloc(<span class="keyword">sizeof</span>(HsmVer_t)) ;</div>
<div class="line">    uint32_t CycleCounterA = 0, CycleCounterB = 0, TotalTimeInNsec;</div>
<div class="line"> </div>
<div class="line">    status = <a class="code" href="group__DRV__HSMCLIENT__MODULE.html#ga152f4adbca2128ca988769beca7009aa">HsmClient_register</a>(&amp;client,APP_CLIENT_ID);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status == <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
<div class="line"> </div>
<div class="line">    status = <a class="code" href="group__DRV__HSMCLIENT__MODULE.html#ga70b2b53821f5782e083984e34df972b7">HsmClient_getVersion</a>(&amp;client,hsmVer,<a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga376db5d2fbbc54611736778be8e15431">SystemP_WAIT_FOREVER</a>);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status == <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* print version */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;[HSM CLIENT] HSMRT 64bit version string = 0x00%llx&quot;</span>,hsmVer-&gt;HsmrtVer);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;\r\n[HSM_CLIENT] HSMRt Version \r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Device Type]   = 0x%x\r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Bin Type]      = 0x%x\r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Soc Type]      = 0x%x\r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Arch Num]      = 0x%x\r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Api Version]   = 0x%x\r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Major Version] = 0x%x\r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Minor Version] = 0x%x\r\n\</span></div>
<div class="line"><span class="stringliteral">                    [Patch Version] = 0x%x\r\n&quot;</span>,\</div>
<div class="line">                    hsmVer-&gt;VerStruct.DevType,hsmVer-&gt;VerStruct.BinType,hsmVer-&gt;VerStruct.SocType,hsmVer-&gt;VerStruct.ApiVer,hsmVer-&gt;VerStruct.MajorVer,hsmVer-&gt;VerStruct.MinorVer,hsmVer-&gt;VerStruct.PatchVer);</div>
<div class="line">}</div>
<div class="line"> </div>
</div><!-- fragment --><ul>
<li>Example UART getVersion output.  <style>div.image img[src="hsmrt_ver.png"]{width:40%}</style> <div class="image">
<img src="hsmrt_ver.png" alt=""/>
<div class="caption">
Get Version UART log</div></div>
</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_GET_UID"></a>
HSM Client GetUID Service.</h1>
<ul>
<li>This service is available on both <b>HS-FS</b> and <b>HS-SE</b> devices.</li>
<li>This service is used to get UID or Unique ID of the device running TIFS_MCU Firmware.</li>
<li>UID is a 64 byte unique ID for a device which user needs to instantiate as an uint8_t * object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gad9f5c4c23d11b16ef7ff0eb03a7fa740" title="The service issued to HSM Server populates the Device UID by default the hsm flag is set to HSM_FLAG_...">HsmClient_getUID()</a> API to get the device UID.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1319"></a>
Example Usage</h3>
<ul>
<li>Registering <a class="el" href="structHsmClient__t.html" title="This is a HSMClient type which holds the information needed by hsm client to communicate with HSM .">HsmClient_t</a> with client ID and requesting device UID.</li>
</ul>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#define APP_CLIENT_ID                 (0x02)</span></div>
<div class="line"><span class="preprocessor">#define HSM_UID_SIZE                  (64U)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Demo Application code on R5 */</span></div>
<div class="line"><span class="keywordtype">void</span> HsmClientApp_start(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    int32_t status ;</div>
<div class="line">    <a class="code" href="structHsmClient__t.html">HsmClient_t</a> client ;</div>
<div class="line">    uint8_t *uid = malloc(<a class="code" href="group__DRV__HSMCLIENT__MODULE.html#gaaeb1c6f595adbdc6376975787d729ebf">HSM_UID_SIZE</a>) ;</div>
<div class="line"> </div>
<div class="line">    status = <a class="code" href="group__DRV__HSMCLIENT__MODULE.html#ga152f4adbca2128ca988769beca7009aa">HsmClient_register</a>(&amp;client,APP_CLIENT_ID);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status == <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Send Request for UID to HSM Server */</span></div>
<div class="line">    status = <a class="code" href="group__DRV__HSMCLIENT__MODULE.html#gad9f5c4c23d11b16ef7ff0eb03a7fa740">HsmClient_getUID</a>(&amp;client, (uint8_t *)uid, <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga376db5d2fbbc54611736778be8e15431">SystemP_WAIT_FOREVER</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* print UID */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;\r\n [HSM CLIENT] Device UID is : &quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span>(uint8_t i = 0; i&lt;<a class="code" href="group__DRV__HSMCLIENT__MODULE.html#gaaeb1c6f595adbdc6376975787d729ebf">HSM_UID_SIZE</a>; i++)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;%02X&quot;</span>, uid[i]);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
</div><!-- fragment --> <h1><a class="anchor" id="DRIVERS_HSMCLIENT_SET_FIREWALL"></a>
HSM Client SetFirewall Service.</h1>
<dl class="section note"><dt>Note</dt><dd>For boot time firewall configuration, Please refer <a class="el" href="SECURITY_PAGE.html#SECURITY_HSFS_BOOTTIME_FIREWALL">HSMRt Firewall Configurations</a></dd></dl>
<ul>
<li>This service is used to configure MPU firewall regions.</li>
<li>User needs to instantiate <a class="el" href="structFirewallReq__t.html" title="This is a FirewallReq_t type which holds the information of Firewall configuration.">FirewallReq_t</a> object and populate regionCount and FirewallRegionArr. FirewallRegionArr is an array of mpu firewall regions(FirewallRegionReq_t) to be configured. User can configure 16 MPU firewall configurations in one request and hence the size of array can not be more than 16.</li>
<li>Once the request is processed, HSM populates <code>statusFirewallRegionArr</code>. Each bit of <code>statusFirewallRegionArr</code> represents the status of each region request from FirewallRegionArr. If some region configuration request was not honoured then the corresponding bit position in statusFirewallRegionArr as returned from HSM is 0, otherwise one. For example if a setFirewall request is sent for configuring 6 mpu regions and out of which 1st and 6th region request were illegal configuration then HSM will populate the statusFirewallRegionArr with <b>0xFFDE (1111 1111 1101 1110)</b>.</li>
<li>If status of HsmClient_setFirewall will return SystemP_SUCCESS only when all regions requested were configured by HSM.</li>
<li>User can use sysconfig for generation of region configurations and can use the array directly for instantiating <a class="el" href="structFirewallReq__t.html" title="This is a FirewallReq_t type which holds the information of Firewall configuration.">FirewallReq_t</a> object.  <style>div.image img[src="syscfg_firewall.png"]{width:60%}</style> <div class="image">
<img src="syscfg_firewall.png" alt=""/>
<div class="caption">
Sysconfig interface for generating region configurations</div></div>
</li>
<li>Region to be configured should be <b>1KB (0x400)</b> aligned and 1KB is the minimum granularity supported for the protected memory map targets size.<ul>
<li>Start Address should be a multiple of 1KB (0x400)</li>
<li>(End Address + 1) should be a multiple of 1KB (0x400)</li>
</ul>
</li>
<li>Each Configurable System MPU region details , Configuration address, number of programmable regions are captured in the table below</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MPU Firewall Id  </th><th class="markdownTableHeadNone">MPU Region  </th><th class="markdownTableHeadNone">MPU Config Addr  </th><th class="markdownTableHeadNone">Num of Programmable MPU Regions  </th><th class="markdownTableHeadNone">Target Start Address  </th><th class="markdownTableHeadNone">Target Size  </th><th class="markdownTableHeadNone">Target name   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">FW R5SS0_CORE0_AXIS_SLV  </td><td class="markdownTableBodyNone">0x400A0000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x78000000  </td><td class="markdownTableBodyNone">64KB  </td><td class="markdownTableBodyNone">R5SS0_CORE0_TCMA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x78100000  </td><td class="markdownTableBodyNone">64KB  </td><td class="markdownTableBodyNone">R5SS0_CORE0_TCMB   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x74000000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS0_CORE0_ICACHE   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x74800000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS0_CORE0_DCACHE   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">FW R5SS0_CORE1_AXIS_SLV  </td><td class="markdownTableBodyNone">0x400C0000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x78200000  </td><td class="markdownTableBodyNone">32KB  </td><td class="markdownTableBodyNone">R5SS0_CORE1_TCMA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x78300000  </td><td class="markdownTableBodyNone">32KB  </td><td class="markdownTableBodyNone">R5SS0_CORE1_TCMB   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x75000000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS0_CORE1_ICACHE   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x75800000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS0_CORE1_DCACHE   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">FW R5SS1_CORE0_AXIS_SLV  </td><td class="markdownTableBodyNone">0x400E0000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x78400000  </td><td class="markdownTableBodyNone">64KB  </td><td class="markdownTableBodyNone">R5SS1_CORE0_TCMA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x78500000  </td><td class="markdownTableBodyNone">64KB  </td><td class="markdownTableBodyNone">R5SS1_CORE0_TCMB   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x76000000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS1_CORE0_ICACHE   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x76800000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS1_CORE0_DCACHE   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3  </td><td class="markdownTableBodyNone">FW R5SS1_CORE1_AXIS_SLV  </td><td class="markdownTableBodyNone">0x40100000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x78600000  </td><td class="markdownTableBodyNone">32KB  </td><td class="markdownTableBodyNone">R5SS1_CORE1_TCMA   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x78700000  </td><td class="markdownTableBodyNone">32KB  </td><td class="markdownTableBodyNone">R5SS1_CORE1_TCMB   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x77000000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS1_CORE1_ICACHE   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x77800000  </td><td class="markdownTableBodyNone">8MB  </td><td class="markdownTableBodyNone">R5SS1_CORE1_DCACHE   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">FW L2OCRAM_BANK0_SLV  </td><td class="markdownTableBodyNone">0x40020000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x70000000  </td><td class="markdownTableBodyNone">512 KB  </td><td class="markdownTableBodyNone">L2OCRAM_BANK0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5  </td><td class="markdownTableBodyNone">FW L2OCRAM_BANK1_SLV  </td><td class="markdownTableBodyNone">0x40040000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x70080000  </td><td class="markdownTableBodyNone">512 KB  </td><td class="markdownTableBodyNone">L2OCRAM_BANK1   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6  </td><td class="markdownTableBodyNone">FW L2OCRAM_BANK2_SLV  </td><td class="markdownTableBodyNone">0x40060000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x70100000  </td><td class="markdownTableBodyNone">512 KB  </td><td class="markdownTableBodyNone">L2OCRAM_BANK2   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7  </td><td class="markdownTableBodyNone">FW L2OCRAM_BANK3_SLV  </td><td class="markdownTableBodyNone">0x40080000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x70180000  </td><td class="markdownTableBodyNone">512 KB  </td><td class="markdownTableBodyNone">L2OCRAM_BANK3   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">8  </td><td class="markdownTableBodyNone">FW MBOX_RAM_SLV  </td><td class="markdownTableBodyNone">0x40140000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x72000000  </td><td class="markdownTableBodyNone">16 KB  </td><td class="markdownTableBodyNone">MBOX_RAM   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">11  </td><td class="markdownTableBodyNone">FW QSPI0_SLV  </td><td class="markdownTableBodyNone">0x40160000  </td><td class="markdownTableBodyNone">8 (0-7)  </td><td class="markdownTableBodyNone">0x48200000  </td><td class="markdownTableBodyNone">256 KB  </td><td class="markdownTableBodyNone">QSPI0   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x60000000  </td><td class="markdownTableBodyNone">32 MB  </td><td class="markdownTableBodyNone">EXT_FLASH0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">0x62000000  </td><td class="markdownTableBodyNone">32 MB  </td><td class="markdownTableBodyNone">EXT_FLASH1   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">12  </td><td class="markdownTableBodyNone">FW SCRM2SCRP0_SLV  </td><td class="markdownTableBodyNone">0x40180000  </td><td class="markdownTableBodyNone">14 (2-15)  </td><td class="markdownTableBodyNone">0x50000000  </td><td class="markdownTableBodyNone">256 MB  </td><td class="markdownTableBodyNone">SCRM2SCRP0   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">13  </td><td class="markdownTableBodyNone">FW SCRM2SCRP1_SLV  </td><td class="markdownTableBodyNone">0x401A0000  </td><td class="markdownTableBodyNone">14 (2-15)  </td><td class="markdownTableBodyNone">0x50000000  </td><td class="markdownTableBodyNone">256 MB  </td><td class="markdownTableBodyNone">SCRM2SCRP1   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">14  </td><td class="markdownTableBodyNone">FW R5SS0_CORE0_AHB_MST  </td><td class="markdownTableBodyNone">0x401C0000  </td><td class="markdownTableBodyNone">14 (2-15)  </td><td class="markdownTableBodyNone">0x50000000  </td><td class="markdownTableBodyNone">256 MB  </td><td class="markdownTableBodyNone">R5SS0_CORE0_AHB   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">15  </td><td class="markdownTableBodyNone">FW R5SS0_CORE1_AHB_MST  </td><td class="markdownTableBodyNone">0x401E0000  </td><td class="markdownTableBodyNone">14 (2-15)  </td><td class="markdownTableBodyNone">0x50000000  </td><td class="markdownTableBodyNone">256 MB  </td><td class="markdownTableBodyNone">R5SS0_CORE1_AHB   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">16  </td><td class="markdownTableBodyNone">FW R5SS1_CORE0_AHB_MST  </td><td class="markdownTableBodyNone">0x40200000  </td><td class="markdownTableBodyNone">14 (2-15)  </td><td class="markdownTableBodyNone">0x50000000  </td><td class="markdownTableBodyNone">256 MB  </td><td class="markdownTableBodyNone">R5SS1_CORE0_AHB   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">17  </td><td class="markdownTableBodyNone">FW R5SS1_CORE1_AHB_MST  </td><td class="markdownTableBodyNone">0x40220000  </td><td class="markdownTableBodyNone">14 (2-15)  </td><td class="markdownTableBodyNone">0x50000000  </td><td class="markdownTableBodyNone">256 MB  </td><td class="markdownTableBodyNone">R5SS1_CORE1_AHB   </td></tr>
</table>
<ul>
<li>TOP_EFUSE_FARM is a non-configurable region and runtime firewall service request will be NACKed if the TOP_EFUSE_FARM falls in any region request. <div class="fragment"><div class="line"> </div>
<div class="line"><span class="comment">/* Demo Application code on R5 */</span></div>
<div class="line"><span class="keywordtype">void</span> HsmClientApp_start(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    int32_t status ;</div>
<div class="line">    <a class="code" href="structHsmClient__t.html">HsmClient_t</a> client ;</div>
<div class="line">    <span class="comment">/* struct instance used for sending set firewall request */</span></div>
<div class="line">    <a class="code" href="structFirewallReq__t.html">FirewallReq_t</a> FirewallReqObj;</div>
<div class="line"> </div>
<div class="line">    status = <a class="code" href="group__DRV__HSMCLIENT__MODULE.html#ga152f4adbca2128ca988769beca7009aa">HsmClient_register</a>(&amp;client,APP_CLIENT_ID);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(status == <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* region count and region configuration array is generated via sysconfig and is used</span></div>
<div class="line"><span class="comment">        for populating  FirewallReqObj*/</span></div>
<div class="line">    FirewallReqObj.<a class="code" href="structFirewallReq__t.html#a517b37cdf25d7cd61b2ffe644f15df59">regionCount</a> = FIREWALL_ARRAY0_NUM_REGIONS;</div>
<div class="line">    FirewallReqObj.<a class="code" href="structFirewallReq__t.html#ad46aa5f2946a3cc035a64aff66d37878">FirewallRegionArr</a> = gMpuFirewallRegionConfig_0;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;\r\n [HSM CLIENT] Sending SET FIREWALL Request to HSM Server..&quot;</span>);</div>
<div class="line">    <span class="comment">/* This requests configures the region and allow all permissions to only R5FSS0_0 */</span></div>
<div class="line">    status = <a class="code" href="group__DRV__HSMCLIENT__MODULE.html#ga823fa989f0c2b87f8b231da6f4000e12">HsmClient_setFirewall</a>(&amp;client,&amp;FirewallReqObj,<a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga376db5d2fbbc54611736778be8e15431">SystemP_WAIT_FOREVER</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* print statusFirewallRegionArr */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;\r\n [HSM CLIENT] statusFirewallRegionArr : 0x%x\r\n &quot;</span>, FirewallReqObj.<a class="code" href="structFirewallReq__t.html#a9c9804e0edbc604ad4b77937429092dc">statusFirewallRegionArr</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
</div><!-- fragment --></li>
<li>Example UART getVersion output.  <style>div.image img[src="set_firewall_output.png"]{width:40%}</style> <div class="image">
<img src="set_firewall_output.png" alt=""/>
<div class="caption">
Demo Set Firewall UART log</div></div>
</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_SET_FIREWALL_INTERRUPT"></a>
HSM Client Set Firewall Interrupt Service.</h1>
<ul>
<li>This service is available on both <b>HSFS</b> and <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server is responsible for the 4 operations mentioned below:<ul>
<li>Interrupt enable for protection and address violation</li>
<li>Clearing Interrupt enable.</li>
<li>Clearing Interrupt status.</li>
<li>Clearing the current fault so that another can be captured.</li>
</ul>
</li>
<li>User needs to instantiate <a class="el" href="structFirewallIntrReq__t.html" title="This is a FirewallIntrReq type which holds the information of MPU Firewall request for interrupt enab...">FirewallIntrReq_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga421bbbfc557a3dbfd8e807a1e569fd65" title="The service issued to HSM Server sets the firewall interrupt request for the given firewall id.">HsmClient_FirewallIntr()</a> API to to sets firewall interrupt.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_OPEN_DEBUG_FIREWALL"></a>
HSM Client Open Debug Firewall Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server verifies the certificate and by default the hsm flag is set to HSM_FLAG_AOP for this service.</li>
<li>Create certificate with full enable or public enable by using scritpts, send certificate via xmodem. Call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga3746ff39aab53e9aa4ed690a7dd33b15" title="The service issued to HSM Server verifies the certificate and by default the hsm flag is set to HSM_F...">HsmClient_openDbgFirewall()</a> Api to use debug Services.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_READ_OTP_ROW"></a>
HSM Client Read OTP Row Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server retrieves the data of Extended OTP row based on row index provided as param.</li>
<li>User needs to instantiate <a class="el" href="structNvmOtpRead__t.html" title="This is an NvmOtpRead type which holds the information of NvmOtp row index and row data corresponding...">NvmOtpRead_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gace3361fd0f3fc438e9b7e0a1acfe2122" title="The service issued to HSM Server retrieves the data of GP OTP row based on row index provided as para...">HsmClient_readOTPRow()</a> API to get the data of Extended OTP row.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_WRITE_OTP_ROW"></a>
HSM Client Write OTP Row Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server writes the data to Extended OTP efuse row based on row index provided as param.</li>
<li>User needs to instantiate <a class="el" href="structNvmOtpRowWrite__t.html" title="This is an NvmOtpRowWrite type which holds the information regarding programming NvmOtp row....">NvmOtpRowWrite_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga96f53cf958e70929245d0f21e10f038e" title="The service issued to HSM Server writes the data to extended OTP efuse row based on row index provide...">HsmClient_writeOTPRow()</a> API to writes the data to Extended OTP row.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_LOCK_OTP_ROW"></a>
HSM Client Lock OTP Row Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server sets the protection status bit of the specified row to 1.</li>
<li>User needs to instantiate <a class="el" href="structNvmOtpRowProt__t.html" title="This is a NvmOtpRowProt type which holds the information of NvmOtp row index and protection status co...">NvmOtpRowProt_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gab43e961650612c91157c0587b3d2746f" title="The service issued to HSM Server sets the protection status bit of the specified row to 1....">HsmClient_lockOTPRow()</a> API to lock the Extended OTP row.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_GET_OTP_ROW_COUNT"></a>
HSM Client Get OTP Row Count Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server retrieves the count of Extended OTP rows.</li>
<li>User needs to instantiate <a class="el" href="structNvmOtpRowCount__t.html" title="This is an NvmOtpRowCount type which holds the information regarding NvmOtp row count and size of eac...">NvmOtpRowCount_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gae625624727a8de14944f65d25fececd5" title="The service issued to HSM Server retrieves the count of extended OTP rows.">HsmClient_getOTPRowCount()</a> API to to get the Extended OTP rows.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_GET_OTP_ROW_PROTECTION"></a>
HSM Client Get OTP Row Protection Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server retrieves the Extended OTP efuse row protection status.</li>
<li>User needs to instantiate <a class="el" href="structNvmOtpRowProt__t.html" title="This is a NvmOtpRowProt type which holds the information of NvmOtp row index and protection status co...">NvmOtpRowProt_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gaca8f5f005b283ec144d9e178b12388ca" title="The service issued to HSM Server retrieves the extended otp efuse row protection status....">HsmClient_getOTPRowProtection()</a> API to to get Extended OTP efuse row protection status.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_PROC_AUTH_BOOT"></a>
HSM Client Proc Auth Boot Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server by SBL.</li>
<li>User needs to instantiate certificate and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga210471c61013f15ddf77447071a5b0c2" title="The service issued to HSM Server helps with extended secure boot for applications.">HsmClient_procAuthBoot()</a> API to to perform proc auth boot.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_READ_SW_REVISION"></a>
HSM Client Read SW Revision Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server retrieves the Software Revision value based on the revision identifier. <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component  </th><th class="markdownTableHeadNone">Revision Identifier Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SWREV SBL  </td><td class="markdownTableBodyNone">0x33   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SWREV HSM  </td><td class="markdownTableBodyNone">0x55   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SWREV APP  </td><td class="markdownTableBodyNone">0xAA   </td></tr>
</table>
</li>
<li>User needs to instantiate <a class="el" href="structSWRev__t.html" title="This is SWRev type which holds the information regarding Revision identifier and value corresponding ...">SWRev_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#gaa04564fc8949545d87b1058f4e9b42df" title="The service issued to HSM Server retrieves the SWRevision value based on identifier as param.">HsmClient_readSWRev()</a> API to read SW revision.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_WRITE_SW_REVISION"></a>
HSM Client Write SW Revision Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server is responsible for updating the software revision of HSM, SBL and Application.</li>
<li>User needs to instantiate <a class="el" href="structSWRev__t.html" title="This is SWRev type which holds the information regarding Revision identifier and value corresponding ...">SWRev_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga6cb697a7edc9ed0cda9e18cf4c9fcb01" title="The service issued to HSM Server writes the SWRevision value based on identifier as param.">HsmClient_writeSWRev()</a> API to write SW revision.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_GET_KEK"></a>
HSM Client Get Derived KEK Service.</h1>
<ul>
<li>This service is available on <b>HS-SE</b> devices.</li>
<li>The service issued to HSM Server retrieves the derived KEK based on identifier as param.</li>
<li>User needs to instantiate <a class="el" href="structDKEK__t.html" title="This is DKEK type which holds the label and context for derivation. This also holds the 256 derived K...">DKEK_t</a> object and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga167cf5d7571ab15f4350e744c9e88ed1" title="The service issued to HSM Server retrieves the derived KEK based on identifier as param.">HsmClient_getDKEK()</a> API to get KEK.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_KEYWRITER"></a>
HSM Client Key Writer Service.</h1>
<ul>
<li>This service is available on <b>HS_FS</b> devices.</li>
<li>The service issued to HSM Server to transition device from HSFS to HSSE.</li>
<li>User needs to instantiate certificate and call <a class="el" href="group__DRV__HSMCLIENT__MODULE.html#ga71bef66d729437b542a5178e1bf24a11" title="The service issued to HSM Server verifies the certificate and process the keywriter operations,...">HsmClient_keyWriter()</a> API to convert device from HSFS to HSSE.</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_getRandomNum"></a>
HSM Client Get Random Number Service.</h1>
<ul>
<li>This service is used to generate random number.</li>
<li>User needs to instantiate <a class="el" href="structRNGReq__t.html" title="This is RNG type which holds the resultPtr for derivation which is returned by TIFS....">RNGReq_t</a> object and populate resultLengthPtr, give inputs for DRBG Mode. Along with this the user needs to give seedValue and seedSize in words when DRBG Mode is enabled.</li>
<li>Once the request is processed, HSM populates <code>resultPtr</code>. Depending on the inputs given by the user the desired length the resultPtr stores the random number For example if a getRandomNum request is sent without DRBG Mode and desired length as 32 then the resultPtr stores eight 4 bytes random number without seedValue and seedSize inputs. However there are certain checks over the inputs given by the user for example the desired length should be less than equal to 128 and should be a multiple of 16. The seedSize should be less than or equal to 12 and right inputs for enabling and disabling should be given.</li>
<li>The status of HsmClient_getRandomNum will return SystemP_SUCCESS only when all parameters requested were configured by HSM.</li>
<li>Example getRandomNum output <div class="image">
<img src="getRandomNum.png" alt=""/>
<div class="caption">
Demo Get Random Number log</div></div>
</li>
</ul>
<h1><a class="anchor" id="DRIVERS_HSMCLIENT_importKeyring"></a>
HSM Client Import Keyring Service.</h1>
<ul>
<li>This service is available on <b>HS_SE</b> devices.</li>
<li>The service issued to HSM Server by SBL.</li>
<li>This service is responsible for importing keyring.</li>
<li>Once the request, HSM will parse the sent X.509 certificate and populate the keyring in HSM secure ram.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1320"></a>
APIs</h1>
<p><a class="el" href="group__DRV__HSMCLIENT__MODULE.html">APIs for HSMCLIENT</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DRV__HSMCLIENT__MODULE_html_gaaeb1c6f595adbdc6376975787d729ebf"><div class="ttname"><a href="group__DRV__HSMCLIENT__MODULE.html#gaaeb1c6f595adbdc6376975787d729ebf">HSM_UID_SIZE</a></div><div class="ttdeci">#define HSM_UID_SIZE</div><div class="ttdoc">UID or Unique ID is a device specific ID of 64 bytes.</div><div class="ttdef"><b>Definition:</b> hsmclient_msg.h:150</div></div>
<div class="ttc" id="astructSIPC__Params_html"><div class="ttname"><a href="structSIPC__Params.html">SIPC_Params</a></div><div class="ttdoc">Parameters used by SIPC_init.</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:84</div></div>
<div class="ttc" id="agroup__DRV__HSMCLIENT__MODULE_html_ga823fa989f0c2b87f8b231da6f4000e12"><div class="ttname"><a href="group__DRV__HSMCLIENT__MODULE.html#ga823fa989f0c2b87f8b231da6f4000e12">HsmClient_setFirewall</a></div><div class="ttdeci">int32_t HsmClient_setFirewall(HsmClient_t *HsmClient, FirewallReq_t *FirewallReqObj, uint32_t timeout)</div><div class="ttdoc">The service issued to HSM Server sets the firewall for the given firewall id and region.</div><div class="ttdef"><b>Definition:</b> hsmclient.c:1319</div></div>
<div class="ttc" id="astructSIPC__Params_html_a187a5d40b35a335a03619580b9eecb58"><div class="ttname"><a href="structSIPC__Params.html#a187a5d40b35a335a03619580b9eecb58">SIPC_Params::tx_SipcQueues</a></div><div class="ttdeci">uintptr_t tx_SipcQueues[MAX_SEC_CORES_WITH_HSM]</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:98</div></div>
<div class="ttc" id="agroup__DRV__SIPC__NOTIFY__MODULE_html_gga8602ce075b94d70bcde46634dd6ab8d2a7d22d9c30e99359f1c7e59fea1e48ea5"><div class="ttname"><a href="group__DRV__SIPC__NOTIFY__MODULE.html#gga8602ce075b94d70bcde46634dd6ab8d2a7d22d9c30e99359f1c7e59fea1e48ea5">CORE_INDEX_HSM</a></div><div class="ttdeci">@ CORE_INDEX_HSM</div><div class="ttdef"><b>Definition:</b> sipc_notify_cfg.h:128</div></div>
<div class="ttc" id="astructFirewallReq__t_html_ad46aa5f2946a3cc035a64aff66d37878"><div class="ttname"><a href="structFirewallReq__t.html#ad46aa5f2946a3cc035a64aff66d37878">FirewallReq_t::FirewallRegionArr</a></div><div class="ttdeci">FirewallRegionReq_t * FirewallRegionArr</div><div class="ttdef"><b>Definition:</b> hsmclient.h:212</div></div>
<div class="ttc" id="astructHsmClient__t_html"><div class="ttname"><a href="structHsmClient__t.html">HsmClient_t</a></div><div class="ttdoc">This is a HSMClient type which holds the information needed by hsm client to communicate with HSM .</div><div class="ttdef"><b>Definition:</b> hsmclient.h:111</div></div>
<div class="ttc" id="astructSIPC__Params_html_a2c25f5d7c4028f22038dda53a58686ed"><div class="ttname"><a href="structSIPC__Params.html#a2c25f5d7c4028f22038dda53a58686ed">SIPC_Params::secHostCoreId</a></div><div class="ttdeci">uint32_t secHostCoreId[MAX_SEC_CORES_WITH_HSM - 1]</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:104</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__SYSTEM_html_ga376db5d2fbbc54611736778be8e15431"><div class="ttname"><a href="group__KERNEL__DPL__SYSTEM.html#ga376db5d2fbbc54611736778be8e15431">SystemP_WAIT_FOREVER</a></div><div class="ttdeci">#define SystemP_WAIT_FOREVER</div><div class="ttdoc">Value to use when needing a timeout of infinity or wait forver until resource is available.</div><div class="ttdef"><b>Definition:</b> SystemP.h:83</div></div>
<div class="ttc" id="astructSIPC__Params_html_a38ea5e6c8f8dba16b482f0a24f94874a"><div class="ttname"><a href="structSIPC__Params.html#a38ea5e6c8f8dba16b482f0a24f94874a">SIPC_Params::numCores</a></div><div class="ttdeci">uint32_t numCores</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:86</div></div>
<div class="ttc" id="agroup__DRV__HSMCLIENT__MODULE_html_ga152f4adbca2128ca988769beca7009aa"><div class="ttname"><a href="group__DRV__HSMCLIENT__MODULE.html#ga152f4adbca2128ca988769beca7009aa">HsmClient_register</a></div><div class="ttdeci">int32_t HsmClient_register(HsmClient_t *HsmClient, uint8_t clientId)</div><div class="ttdoc">register a client to a particular ClientId</div><div class="ttdef"><b>Definition:</b> hsmclient.c:461</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_gafe348ab5badd2c15118f95e21bb192c6"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a></div><div class="ttdeci">#define DebugP_log(format,...)</div><div class="ttdoc">Function to log a string to the enabled console.</div><div class="ttdef"><b>Definition:</b> DebugP.h:225</div></div>
<div class="ttc" id="agroup__lld__ethernet_html_ga8c1dfc1ccf00a08192611433ee7f17b4"><div class="ttname"><a href="group__lld__ethernet.html#ga8c1dfc1ccf00a08192611433ee7f17b4">__attribute__</a></div><div class="ttdeci">struct lld_sockaddr __attribute__</div><div class="ttdoc">This is the SecureBoot Stream type which holds the data for a specific bootloader to HSM call....</div></div>
<div class="ttc" id="astructFirewallReq__t_html"><div class="ttname"><a href="structFirewallReq__t.html">FirewallReq_t</a></div><div class="ttdoc">This is a FirewallReq_t type which holds the information of Firewall configuration.</div><div class="ttdef"><b>Definition:</b> hsmclient.h:209</div></div>
<div class="ttc" id="agroup__DRV__HSMCLIENT__MODULE_html_ga3b55ad3229c657ca509f9b29451e37e5"><div class="ttname"><a href="group__DRV__HSMCLIENT__MODULE.html#ga3b55ad3229c657ca509f9b29451e37e5">HsmClient_init</a></div><div class="ttdeci">int32_t HsmClient_init(SIPC_Params *params)</div><div class="ttdoc">Initialize the HSM client for current core.</div><div class="ttdef"><b>Definition:</b> hsmclient.c:491</div></div>
<div class="ttc" id="agroup__DRV__SIPC__NOTIFY__MODULE_html_gafdb4148be02e87da0c0e51ed59d99f51"><div class="ttname"><a href="group__DRV__SIPC__NOTIFY__MODULE.html#gafdb4148be02e87da0c0e51ed59d99f51">SIPC_Params_init</a></div><div class="ttdeci">void SIPC_Params_init(SIPC_Params *params)</div><div class="ttdoc">Set default value to SIPC_Params.</div></div>
<div class="ttc" id="asipc__notify__cfg_8h_html_ac2fdfb0ed32bb14a82ca144071714220"><div class="ttname"><a href="sipc__notify__cfg_8h.html#ac2fdfb0ed32bb14a82ca144071714220">SIPC_MSG_SIZE</a></div><div class="ttdeci">#define SIPC_MSG_SIZE</div><div class="ttdoc">SIPC message size in bytes each element of queue will be of this size.</div><div class="ttdef"><b>Definition:</b> sipc_notify_cfg.h:47</div></div>
<div class="ttc" id="agroup__DRV__SIPC__NOTIFY__MODULE_html_ggad5da1faa1249071c597b9dac202f2ae4aa782ed37b1959ba8b9bcc5a9a375802a"><div class="ttname"><a href="group__DRV__SIPC__NOTIFY__MODULE.html#ggad5da1faa1249071c597b9dac202f2ae4aa782ed37b1959ba8b9bcc5a9a375802a">CORE_ID_R5FSS0_0</a></div><div class="ttdeci">@ CORE_ID_R5FSS0_0</div><div class="ttdef"><b>Definition:</b> sipc_notify_cfg.h:110</div></div>
<div class="ttc" id="astructSIPC__Params_html_a14cab21bb80a790014c6ac12b4a904b0"><div class="ttname"><a href="structSIPC__Params.html#a14cab21bb80a790014c6ac12b4a904b0">SIPC_Params::coreIdList</a></div><div class="ttdeci">uint32_t coreIdList[MAX_SEC_CORES_WITH_HSM]</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:89</div></div>
<div class="ttc" id="astructSIPC__Params_html_a1bfa9db788f35bdecf497a1a98edd4bc"><div class="ttname"><a href="structSIPC__Params.html#a1bfa9db788f35bdecf497a1a98edd4bc">SIPC_Params::ipcQueue_eleSize_inBytes</a></div><div class="ttdeci">uint16_t ipcQueue_eleSize_inBytes</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:95</div></div>
<div class="ttc" id="astructFirewallReq__t_html_a9c9804e0edbc604ad4b77937429092dc"><div class="ttname"><a href="structFirewallReq__t.html#a9c9804e0edbc604ad4b77937429092dc">FirewallReq_t::statusFirewallRegionArr</a></div><div class="ttdeci">uint16_t statusFirewallRegionArr</div><div class="ttdef"><b>Definition:</b> hsmclient.h:213</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__SYSTEM_html_ga47e638d7c694e6d42e57b96b071b8a6f"><div class="ttname"><a href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a></div><div class="ttdeci">#define SystemP_SUCCESS</div><div class="ttdoc">Return status when the API execution was successful.</div><div class="ttdef"><b>Definition:</b> SystemP.h:56</div></div>
<div class="ttc" id="astructFirewallReq__t_html_a517b37cdf25d7cd61b2ffe644f15df59"><div class="ttname"><a href="structFirewallReq__t.html#a517b37cdf25d7cd61b2ffe644f15df59">FirewallReq_t::regionCount</a></div><div class="ttdeci">uint16_t regionCount</div><div class="ttdef"><b>Definition:</b> hsmclient.h:210</div></div>
<div class="ttc" id="agroup__DRV__SIPC__NOTIFY__MODULE_html_gga8602ce075b94d70bcde46634dd6ab8d2aec8bd284ef7986d731a488732fbdf2a8"><div class="ttname"><a href="group__DRV__SIPC__NOTIFY__MODULE.html#gga8602ce075b94d70bcde46634dd6ab8d2aec8bd284ef7986d731a488732fbdf2a8">CORE_INDEX_SEC_MASTER_0</a></div><div class="ttdeci">@ CORE_INDEX_SEC_MASTER_0</div><div class="ttdef"><b>Definition:</b> sipc_notify_cfg.h:126</div></div>
<div class="ttc" id="agroup__DRV__HSMCLIENT__MODULE_html_gad9f5c4c23d11b16ef7ff0eb03a7fa740"><div class="ttname"><a href="group__DRV__HSMCLIENT__MODULE.html#gad9f5c4c23d11b16ef7ff0eb03a7fa740">HsmClient_getUID</a></div><div class="ttdeci">int32_t HsmClient_getUID(HsmClient_t *HsmClient, uint8_t *uid, uint32_t timeout)</div><div class="ttdoc">The service issued to HSM Server populates the Device UID by default the hsm flag is set to HSM_FLAG_...</div><div class="ttdef"><b>Definition:</b> hsmclient.c:592</div></div>
<div class="ttc" id="astructSIPC__Params_html_acc0e3df1965dc7364dfec784fa90bcdf"><div class="ttname"><a href="structSIPC__Params.html#acc0e3df1965dc7364dfec784fa90bcdf">SIPC_Params::rx_SipcQueues</a></div><div class="ttdeci">uintptr_t rx_SipcQueues[MAX_SEC_CORES_WITH_HSM]</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:100</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_ga552e9055ca7eab5fe6c224c6cd5a9d4c"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a></div><div class="ttdeci">#define DebugP_assert(expression)</div><div class="ttdoc">Function to call for assert check.</div><div class="ttdef"><b>Definition:</b> DebugP.h:177</div></div>
<div class="ttc" id="agroup__DRV__HSMCLIENT__MODULE_html_ga70b2b53821f5782e083984e34df972b7"><div class="ttname"><a href="group__DRV__HSMCLIENT__MODULE.html#ga70b2b53821f5782e083984e34df972b7">HsmClient_getVersion</a></div><div class="ttdeci">int32_t HsmClient_getVersion(HsmClient_t *HsmClient, HsmVer_t *verId, uint32_t timeToWaitInTick)</div><div class="ttdoc">populates the current HSMRT version Id by default the hsm flag is set to HSM_FLAG_AOP for this servic...</div><div class="ttdef"><b>Definition:</b> hsmclient.c:523</div></div>
<div class="ttc" id="astructSIPC__Params_html_a3e3afbcab9e012de292475141f55cf90"><div class="ttname"><a href="structSIPC__Params.html#a3e3afbcab9e012de292475141f55cf90">SIPC_Params::ipcQueue_length</a></div><div class="ttdeci">uint16_t ipcQueue_length</div><div class="ttdef"><b>Definition:</b> sipc_notify.h:94</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
